{
  "date": "2019-10-11",
  "author": {
    "display_name": "Kashif Iqbal"
},
  "draft": "false",
  "toc": true,
  "title": "فرمت فایل WMV",
  "description": "درباره فرمت فایل WMV و APIهایی که می‌توانند فایل‌های WMV را ایجاد و باز کنند، بیاموزید.",
  "linktitle": "WMV",
  "menu": {
    "docs": {
      "parent": "video",
      "identifier": "video-wm-fav"
}
},
  "lastmod": "2019-09-16"
}

## فایل WMV چیست؟

فرمت سیستم های پیشرفته (ASF) یک ظرف چندرسانه ای دیجیتال است که عمدتاً برای ذخیره و انتقال جریان های رسانه ای طراحی شده است. Microsoft Windows Media Video (WMV) فرمت ویدئوی فشرده است و Microsoft Windows Media Audio (WMA) فرمت صوتی فشرده همراه با ابرداده اضافی در ظرف ASF است که توسط مایکروسافت ایجاد شده است. هنگامی که فایل‌های WMV یا WMA با کدک‌های Windows Media Video و Windows Media Audio کدگذاری می‌شوند، سپس با پسوند asf. نمایش داده می‌شوند. WMV فایل های بزرگ را برای سرعت انتقال بهتر از طریق شبکه فشرده می کند و در عین حال کیفیت ویدیو را حفظ می کند. WMV به طور خاص برای اجرا در تمام دستگاه های ویندوز طراحی شده است. پس از استانداردسازی توسط انجمن مهندسین تصاویر متحرک و تلویزیون (SMPTE)، WMV اکنون به عنوان یک فرمت استاندارد باز در نظر گرفته می شود.

## تاریخ ##

With the help of Microsoft proprietary codecs new compressed video format was developed in 1999 known as WMV7 which was based on MPEG-4 Part 2. بهبودها در دو نسخه دیگر یعنی WMV8 و 9 اضافه شد. مایکروسافت نسخه 9^^th^^ WMV را برای استانداردسازی در سال 2003 به SMPTE ارائه کرد که در نهایت در سال 2006 با نام SMPTE 421M که به نام VC-1 نیز شناخته می شود استاندارد شد. ایده پشت WMV توسعه یک قالب رسانه ای بود که بتواند توسط تمام سخت افزارها و نرم افزارهای پشتیبانی شده توسط مایکروسافت پشتیبانی شود. علاوه بر این، هدف اصلی دیگر انتقال جریان های ویدئویی از طریق اینترنت در یک سناریوی بهینه بود. پس از استانداردسازی از SMPTE، WMV نیز تبدیل به یک فرمت ویدئویی برای دیسک‌های Blu-ray شد.

## مشخصات فرمت فایل

### ظرف

به طور کلی، WMV در یک کانتینر ASF بسته بندی می شود، اما علاوه بر این، کانتینر Matroska یا AVI نیز می توانند به ترتیب با پسوندهای mkv. و .avi از آن پشتیبانی کنند.

### Windows Media Video 9

اگرچه کدک‌های صوتی و تصویری مختلفی در سری Windows Media Video 9 برای نوشتن و پخش رسانه‌های دیجیتال موجود است، کدک WMV-9 جدیدترین و بهترین کدک ویدیویی است زیرا می‌تواند فشرده‌سازی بهینه را از نرخ بیت بسیار پایین یعنی 160 x بدست آورد. 120 در 10 کیلوبیت بر ثانیه تا 1920 x 1080 در 4-8 مگابیت در ثانیه برای انواع ویدیوهای HD.

### ساختار کدک

WMV-9 دارای فرمت رنگ داخلی 8 بیتی 4:2:0 است. مانند سایر استانداردهای رایج فشرده‌سازی ویدئو MPEG-1 و H.261، WMV-9 از طرح جبران حرکت و تبدیل فضایی مبتنی بر بلوک استفاده می‌کند. به طور کلی می توان گفت که این استانداردها جبران حرکت بلوک به بلوک را از قاب بازسازی شده قبلی با کمک یک کمیت دوبعدی به نام بردار حرکت (MV) انجام می دهند تا جابجایی فضایی را سیگنال دهند. بلوک فعلی با کمک پیش بینی مقادیر قاب بازسازی شده قبلی با همان اندازه تشکیل می شود که توسط بردار حرکت از موقعیت فعلی جابجا شده است. در نهایت، خطای باقیمانده به عنوان تفاوت بین بلوک پیش‌بینی‌شده جبران‌شده با حرکت و بلوک واقعی محاسبه می‌شود. این خطای باقیمانده با استفاده از تبدیل خطی فشرده سازی انرژی تبدیل شده و سپس کوانتیزه شده و آنتروپی کدگذاری می شود.

Quantized transform coefficients are entropy decoded, de-quantized, and inverse transformed to produce an approximation of the residual error on the decoder side, which is then added to the motion-compensated prediction to generate the reconstruction. The high-level description of the codec is shown in the following image.

بقیه بخش به بهبودهای جدید در WMV-9 می پردازد که آن را از بقیه راه حل های کدگذاری ویدیویی مانند استانداردهای MPEG متمایز می کند. WMV-9 دارای فریم های درون (I)، پیش بینی شده (P) و پیش بینی دو جهته (B) است. فریم های درونی آنهایی هستند که به طور مستقل کدگذاری می شوند و هیچ وابستگی به فریم های دیگر ندارند. فریم های پیش بینی شده فریم هایی هستند که به یک فریم در گذشته وابسته هستند. رمزگشایی یک فریم پیش‌بینی‌شده تنها پس از رمزگشایی همه فریم‌های مرجع قبل از فریم فعلی که از آخرین فریم (I) شروع می‌شوند، ممکن است رخ دهد. فریم های B قاب هایی هستند که دارای دو مرجع هستند - یکی در گذشته موقت و دیگری در آینده زمانی. فریم های B پس از مراجع خود منتقل می شوند، به این معنی که فریم های B خارج از نظم ارسال می شوند تا اطمینان حاصل شود که مراجع آنها در زمان رمزگشایی در دسترس هستند. فریم های B در WMV-9 به عنوان مرجع برای فریم های بعدی استفاده نمی شوند. این فریم‌های B را خارج از حلقه رمزگشایی قرار می‌دهد، و اجازه می‌دهد میانبرهایی در طول رمزگشایی فریم‌های B بدون دریفت یا مصنوعات بصری طولانی‌مدت گرفته شوند. تعریف فوق از فریم های I، P و B برای هر دو دنباله پیش رونده و درهم آمیخته صادق است.

عملکرد کدک های ویدئویی با نمودار نرخ-اعوجاج (RD) آنها مقایسه می شود. این یک منحنی 2 بعدی است که اعوجاج حاصل از فشرده سازی را در یک بیت ریت مشخص نشان می دهد.

WMV-9 این مشکل را با معرفی انواع تکنیک های ذکر شده در زیر برطرف کرده است:

1. تبدیل اندازه بلوک تطبیقی

2. مجموعه تبدیل با دقت محدود

3. جبران حرکت

4. کوانتیزه کردن و کم کردن

5. کدگذاری آنتروپی پیشرفته

6. فیلتر کردن حلقه

7. کدگذاری فریم B پیشرفته

8. کدگذاری درونی

9. صاف کردن همپوشانی

10. ابزارهای با نرخ پایین

11. جبران محو شدن

## منابع

* [https://bytescout.com/blog/2018/02/windows-media-video-format.html](https://bytescout.com/blog/2018/02/windows-media-video-format.html )

* [https://en.wikipedia.org/wiki/Windows_Media_Video](https://en.wikipedia.org/wiki/Windows_Media_Video)


