{
  "date": "2019-10-11",
  "keywords": [
"فایل psb",
"فرمت فایل psb",
"فایل psb چیست",
"فایل",
"نمونه psb",
"پسوند فایل psb",
"افزونه",
"قالب"
]،
  "author": {
    "display_name": "Kashif Iqbal"
}،
  "draft": "false",
  "toc": true,
  "title": "PSB - فرمت فایل تصویر بزرگ فتوشاپ",
  "description": "درباره فرمت فایل PSB و APIهایی که می توانند فایل های PSB ایجاد و باز کنند، بیاموزید.",
  "linktitle": "PSB",
  "menu": {
    "docs": {
      "parent": "image",
      "identifier": "image-ps-fab"
}
}،
  "lastmod": "2019-09-10"
}

## فایل PSB چیست؟
Adobe Photoshop فایل ها را در دو فرمت ذخیره می کند. فایل هایی با ابعاد 30000 در 30000 پیکسل با پسوند PSD و فایل های بزرگتر از PSD تا 300000 در 300000 پیکسل با پسوند PSB به نام Photoshop Big ذخیره می شوند. به طور خاص، فایل های PSB می توانند به اندازه 4 EB (بیش از 4.2 میلیارد گیگابایت) با تصاویری با ارتفاع و عرض حداکثر 300000 پیکسل باشند. از طرف دیگر، PSD ها می توانند حداکثر تا 2 گیگابایت و ابعاد تصویر 30000 پیکسل باشند.

PSB is also known as large format size for photoshop and supports all the photoshop features like layers, effects and filters.Photoshop can convert PSB file to [PSD](/image/psd/), [JPG](/image/jpeg/), [PNG](/image/png/), [EPS](/page-description-language/eps/), [GIF](/image/gif/) and other formats as well. Photoshop large document format is available once the feature of file handling pane of Photoshop’s preferences dialog box is enabled.

## اطلاعات فرمت فایل ##

فرمت فایل فتوشاپ به پنج بخش اصلی با چندین نشانگر طول برای جابجایی بین بخش ها تقسیم می شود.

|فرمت فایل
---|
|سربرگ فایل
|داده های حالت رنگ
| منابع تصویری
| اطلاعات لایه و ماسک
|(((
داده های تصویری
)))

### سربرگ فایل ###

هدر فایل دارای طول ثابت 26 بایت است و دارای ویژگی های اصلی تصویر است.

امضای BYTE [4] - برابر با '8BPS' است.

نسخه WORD [2] - شماره نسخه، PSD # 1، PSB # 2.

BYTE Reserved [6] - رزرو شده و همیشه صفر است.

کانال های WORD [2] - تعداد کانال های رنگی در تصویر از جمله کانال های آلفا. مقدار آن از 1 تا 56 متغیر است.

ردیف های بلند [4] - ارتفاع تصویر بر حسب پیکسل، PSD 1-30000، PSB 1-300000.

ستون های بلند [4] - عرض تصویر بر حسب پیکسل، PSD 1-30000، PSB 1-300000.

WORD Depth [2] – تعداد بیت در هر کانال. مقادیر پشتیبانی شده 1،8،16 و 32 هستند.

حالت WORD [2] - حالت رنگی فایل.

#### شرح حالت ####


|حالت|توضیحات
---|---|
|0|بیت مپ (تک رنگ)
|1|مقیاس خاکستری
|2|فهرست شده
|3|RGB
|4|CMYK
|7|چند کانال
|8|دوتون (نیم آهنگ)
|9|آزمایشگاه

### داده های حالت رنگ ###

پس از بخش هدر فایل، بخش داده های حالت رنگ دنبال می شود. بلوک با یک عدد LONG شروع می شود که طول بلوک را بر حسب بایت نشان می دهد. ساختار داده های حالت رنگ به شرح زیر است:

4 بایت - طول داده های رنگ زیر.

متغیر - داده رنگ

اگر مقدار فیلد حالت در قسمت سرصفحه Indexed Color یا duotone نباشد، طول بلوک 0 خواهد بود و هیچ داده‌ای پس از فیلد طول وجود نخواهد داشت.

برای تصاویر رنگی نمایه شده، طول 768 بایت خواهد بود که شامل یک پالت رنگی 256 خواهد بود. برای دوتن، داده ها حاوی پارامترهای صفحه و سایر اطلاعات مرتبط خواهند بود.

### منابع تصویر ###

بعد از بخش داده های حالت رنگ، بلوک سوم بخش منابع تصویر است. چهار بایت اول یک عدد LONG است که طول بلوک را مشخص می کند و سپس یک سری از بلوک های منبع را مشخص می کند. ساختار بلوک منبع تصویر به شرح زیر است:

نوع BYTE [4] – امضای '8BIM

WORD ID [2] – شناسه منبع تصویر. لیستی از شناسه های منبع وجود دارد که از لینک مرجع قابل مشاهده است.

نام BYTE [متغیر] – نام: رشته پاسکال با طول زوج. ** **

LONG Size [4] - اندازه واقعی داده های منبع که در ادامه آمده است.

BYTE داده [متغیر} - داده های منبع. برای ایجاد سایز یکنواخت بالشتک شده است.

برخی از فرمت های منابع به اختصار در زیر توضیح داده شده است:

**فرمت منبع گرید و راهنما:** اطلاعات گرید و راهنماها در بلوک منبع ذخیره می شود. این بلوک های منبع حاوی 16 بایت شبکه و سربرگ راهنما و به دنبال آن بلوک های 5 بایتی اطلاعات راهنما هستند.

**فرمت منبع تصویر کوچک:** اطلاعات تصویر کوچک در بلوک منبع تصویر برای نمایش پیش نمایش ذخیره می شود که شامل 28 بایت سرصفحه و تصویر کوچک JFIF در RGB است.

** فرمت منبع نمونه‌گرهای رنگی:** اطلاعات نمونه‌گرهای رنگی در بلوک منبع تصویر با یک هدر 8 بایتی و به دنبال آن یک بلوک با طول متغیر از اطلاعات نمونه‌گرهای رنگی ذخیره می‌شوند.

### اطلاعات لایه و ماسک ###

بلوک چهارم، بلوک اطلاعات لایه و ماسک است و حاوی اطلاعاتی در مورد لایه ها و ماسک ها است. اطلاعات لایه ابتدا ذخیره می شود و سپس اطلاعات ماسک می شوند.

**اطلاعات لایه:** اطلاعات لایه با مقدار LONG شروع می شود که طول اطلاعات لایه را نشان می دهد. پس از آن تعداد ارزش WORD وجود دارد که تعداد رکوردهای لایه را نشان می دهد.

[8] - طول لایه ها

[2] - تعداد لایه ها

[متغیر] - اطلاعات مربوط به هر لایه.

[متغیر] - داده های تصویر کانال. ** **

**اطلاعات ماسک:** ساختار ماسک دارای فرمت زیر است:


|ساختار داده|نام فیلد| شرح
---|---|---|
|WORD| فضای رنگی روکش| (مستند نیست)
|BYTE[8]| اجزای رنگ| اجزای رنگ 4x2 بایت
|WORD| کدورت | 0#شفاف، 1#مادر
|BYTE| مهربان| 0# معکوس، 1# محافظت شده، 128# از مقدار ذخیره شده استفاده کنید
|BYTE| بالشتک| را روی صفر تنظیم کنید

### داده های تصویر ###

بخش آخر شامل داده های پیکسل تصویر است. داده های تصویر به صورت یک سری توالی در صفحات ذخیره می شوند، یعنی ابتدا همه داده های قرمز، سپس همه داده های سبز و غیره. WORD در ابتدای هر خط اندازه را بر حسب بایت مربوط به هر خط اسکن نشان می دهد.

[2] - روش فشرده سازی:

[متغیر] - داده های تصویر به ترتیب مسطح مانند RRRR، GGGG، BBBB و غیره.

روش های فشرده سازی:

0 – Raw داده های تصویری

1 - RLE فشرده شده

2 - زیپ بدون پیش بینی

3 - زیپ با پیش بینی

## ارجاع ##

* [فرمت فایل PSB - توسط Adobe](https://www.adobe.com/devnet-apps/photoshop/fileformatashtml/)

* [PSB - Wikipedia](https://en.wikipedia.org/wiki/Adobe_Photoshop#File_format)


