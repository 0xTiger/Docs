{
  "date" : "2019-10-11",
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"EMLX - формат файлу Apple Mail",
  "description":"Дізнайтеся про формат файлу EMLX та API, які можуть створювати та відкривати файли EMLX.",
  "linktitle" : "EMLX",
  "menu" : {
    "docs" : {
      "parent" : "email"
}
},
  "lastmod" : "2019-09-10"
}

## Що таке файл EMLX?

Формат файлу EMLX реалізовано та розроблено Apple. Програма Apple Mail використовує формат файлу EMLX для експорту електронних листів. Існують також інші програми, які можуть відкривати файли EMLX і конвертувати їх в інші формати файлів.

## Коротка історія формату файлів EMLX

Операційна система Mac OS X перейняла існуючу програму електронної пошти NeXTMail, створену NeXT як частину операційної системи NeXTSTEP. Apple після придбання NeXT розширила свої функції, і тепер вона стала програмою електронної пошти Apple Mail, яка буде використовуватися як поштовий клієнт за замовчуванням. Електронні листи, експортовані через Apple Mail, зберігаються безпосередньо як файли EMLX. Крім того, це поштовий клієнт за замовчуванням для файлів EMLX, коли хтось відкриває їх подвійним клацанням у Mac OS.

## Формат файлу EMLX

Файли EMLx — це прості текстові файли, які можна відкрити в будь-якому текстовому редакторі, наприклад Блокноті. Файлова структура EMLX складається з трьох частин:

* Кількість байтів для повідомлення - довжина самого повідомлення, написана в ASCII у десятковому вигляді, закінчується 0x0a
* Саме повідомлення
* Метадані повідомлення у формі XML plist

Це можна краще пояснити за допомогою наведеного нижче зразка електронної пошти, отриманого з Apple Mail як EMLX і відкритого в текстовому редакторі.

### Приклад EMLX

```
875       
X-Spam-Checker-Version: SpamAssassin 3.3.2 (2011-06-06) on ******.*********.***
X-Spam-Level:
X-Spam-Status: No, score#-3.2 required#4.2 tests#BAYES_00,RP_MATCHES_RCVD,
        SPF_PASS,TVD_SPACE_RATIO autolearn#ham version#3.3.2
Received: from [127.0.0.1](******.*********.*** [***.**.**.**])
        by ******.*********.*** (8.14.5/8.14.5) with ESMTP id r2TN8m4U099571
        for <****@*********.***>; Fri, 29 Mar 2013 19:08:48 -0400 (EDT)
        (envelope-from ****@*********.***)
Subject: very simple
From: Sender <****@*********.***>
Content-Type: text/plain; charset#us-ascii
Message-Id: <4E83618E-BB56-404F-8595-87352648ADC7@*********.***>
Date: Fri, 29 Mar 2013 19:09:06 -0400
To: Reciever <****@*********.***>
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v1283)
X-Mailer: Apple Mail (2.1283)

message Foo
--
Sender
http://www.la-grange.net/karl/

<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version#"1.0">
<dict>
        <key>date-sent</key>
        <real>1364598546</real>
        <key>flags</key>
        <integer>8590195713</integer>
        <key>original-mailbox</key>
        <string>imap://********@127.0.0.1:11143/mail/2013/03</string>
        <key>remote-id</key>
        <string>41147</string>
        <key>subject</key>
        <string>very simple</string>
</dict>
</plist>
```

У цьому прикладі 875 показує загальну довжину повідомлення. Метадані повідомлення вкладено в<plist> теги та прапори описані нижче:

|Поле|Опис|Значення
---|---|---|
|0|прочитати|1 << 0
|1|видалено|1 << 1
|2|відповів|1 << 2
|3|зашифровано|1 << 3
|4|позначено|1 << 4
|5|останній|1 << 5
|6|чернетка|1 << 6
|7|початковий (більше не використовується)|1 << 7
|8|передано|1 << 8
|9|перенаправлено|1 << 9
|10-15|кількість вкладень|3F << 10 (6 біт)
|16-22|рівень пріоритету|7F << 16 (7 біт)
|23|підпис|1 << 23
|24|є сміттям|1 << 24
|25|не сміття|1 << 25
|26-28|розмір шрифту дельта|7 << 26 (3 біти)
|29|записаний рівень небажаної пошти|1 << 29
|30|виділіть текст у toc|1 << 30
|31|(невикористаний)|

## Дивіться також ##

* [EML](/uk/email/eml/)
* [MSG](/uk/email/msg/)

