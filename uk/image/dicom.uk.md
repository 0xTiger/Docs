{
  "date" : "2019-10-11",
  "keywords" :[ "файл dicom", "формат файлу dicom", "що таке файл dicom", "файл", "приклад dicom", "розширення файлу dicom", "розширення", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"DICOM - формат цифрових зображень і комунікаційних файлів",
  "description":"Дізнайтеся про формат файлу DICOM та API, які можуть створювати та відкривати файли DICOM.",
  "linktitle" : "DICOM",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## Що таке файл DICOM?

DICOM — це абревіатура від Digital Imaging and Communications in Medicine і відноситься до галузі медичної інформатики. DICOM використовується для інтеграції медичних пристроїв візуалізації, таких як принтери, сервери, сканери тощо від різних постачальників, а також містить ідентифікаційні дані кожного пацієнта для унікальності. Файли DICOM можуть використовуватися між двома сторонами, якщо вони здатні отримувати дані зображення у форматі DICOM. Комунікаційна частина DICOM є протоколом прикладного рівня та використовує TCP/IP для зв’язку між об’єктами. Веб-служби підтримують версії 1.0, 1.1, 2 або новіші.

## Історія ##

DICOM був розроблений спільно Американським коледжем радіології (ACR) і Національною асоціацією виробників електротехніки (NEMA) для обміну та перегляду медичних зображень, таких як МРТ, КТ та ультразвукові зображення. Спочатку було важко декодувати зображення, які створювали машини. Тому ACR і NEMA разом сформували команду в 1983 році, яка випустила свій перший стандарт, ACR/NEMA 300 в 1985 році. Друга версія була випущена в 1988 році, яка була більш популярною серед постачальників, але незабаром було зрозуміло, що друга версія також потребує вдосконалення. Третя версія стандарту була випущена в 1993 році як "DICOM". 3.0 все ще залишається останньою версією, але вона постійно оновлюється з 1993 року.

## Формат файлу DICOM ##

DICOM — це поєднання визначення формату файлу та протоколу мережевого зв’язку. DICOM використовує розширення .DCM. .DCM існує у двох різних форматах, тобто форматі 1.x і форматі 2.x. Формат DCM 1.x також доступний у двох версіях: звичайній і розширеній. Для веб-служб DICOM використовуються протоколи HTTP і HTTPS.

### Заголовок файлу ###

Заголовок файлу містить 128-байтну преамбулу файлу та 4-байтовий префікс DICOM.

**Преамбула # 128 байтів**|**Префікс # 4 байти “D, I, C, M**

**Преамбула** використовується для доступу до зображень та інших даних у файлі DICOM, забезпечуючи сумісність із широко використовуваними форматами файлів зображень.

**Префікс** містить рядок «DICM» у вигляді символів у верхньому регістрі.

### Набір даних ###

Кожен файл має містити один набір даних, що представляє екземпляр SOP і клас SOP із відповідним IOD. Набір даних є представленням інформації реального світу. Набір даних містить елементи даних, а елементи даних містять значення атрибутів цього об’єкта. Структура атрибутів вказується в IOD. Об’єкт даних DICOM складається з ряду атрибутів, включаючи такі елементи, як ім’я, ідентифікатор тощо, а також один спеціальний атрибут, що містить піксельні дані зображення.

### Елементи даних ###

Елемент даних складається з тегу елемента даних, довжини значення та значення для елемента даних. Існує 5 типів елементів даних, а саме обов’язкові елементи даних типу 1, умовні елементи даних типу 1C, обов’язкові елементи даних типу 2, умовні елементи даних типу 2C і додаткові елементи даних типу 3. Основні Нижче наведено три типи структур елементів даних.

**Елемент даних із явним VR**

|Номер групи|Номер елемента|Подання значення|Зарезервовано|Довжина значення|Поле значення
---|---|---|---|---|---|
|2 байти|2 байти|2 байти|2 байти # 0x00, 0x00|4 байти|"Довжина значення в байтах"

**Елемент даних із явним VR**

|Номер групи|Номер елемента|Подання значення|Довжина значення|Поле значення
---|---|---|---|---|
|2 байти|2 байти|2 байти|2 байти|"Довжина значення в байтах"

**Елемент даних із неявним VR**


|Номер групи|Номер елемента|Довжина значення|Поле значення
---|---|---|---|
|2 байти|2 байти|4 байти|"Довжина значення в байтах"

1. **Тег елемента даних**: упорядковане ціле число, яке представляє номер групи та номер елемента
1. **Подання значення VR**: VR – це рядок символів, який представляє VR елемента даних.
1. **Довжина значення**: це беззнакове ціле число, яке представляє явну довжину поля значення.
1. **Поле значення**: описує значення елементів даних.

## Синтаксис передачі ##

Синтаксис передачі — це набір правил для кодування для однозначного представлення більш абстрактних синтаксисів. За допомогою синтаксису передачі взаємодіючі сутності узгоджують загальні методи кодування, які вони підтримують.

## SOP ##

Союз IOD і DIMSE визначає клас SOP. Визначення класу SOP містить правила та семантику, які можуть обмежувати використання послуг у групі послуг DIMSE або атрибутах IOD. Прикладами елементів служби є збереження, отримання, пошук, переміщення тощо. Прикладами об’єктів є зображення КТ, МР-зображення, а також списки розкладів, черги друку тощо.

## Послуги ##

DICOM надає різні послуги, в основному пов'язані з передачею даних. Кожен із них коротко описано нижче.


**Зберігання:** Служба DICOM Store надсилає зображення або інші об’єкти до системи архівування зображень і зв’язку (PACS) або сервера.


**Зобов’язання щодо зберігання:** Служба зобов’язань щодо зберігання використовується для підтвердження того, що зображення постійно зберігається на пристрої на будь-якому типі носія.


**Запит/отримання:** Ця служба дозволяє робочій станції знаходити списки зображень або інших об’єктів, а потім отримувати їх із PACS.


**Робочий список модальності:** Служба робочого списку модальності надає список процедур візуалізації, які було заплановано для виконання пристроєм для отримання зображень.


**Друк:** Ця служба надсилає зображення на принтер.

## Номери портів через IP ##

DICOM використовує такі порти TCP і UDP:

1. 104
1. 2761
1. 2762
1. 11112

## Посилання ##

* [https://en.wikipedia.org/wiki/DICOM](https://en.wikipedia.org/wiki/DICOM)
* [https://www.leadtools.com/sdk/medical/dicom-spec](https://www.leadtools.com/sdk/medical/dicom-spec)
* [https://www.dicomstandard.org/concepts/](https://www.dicomstandard.org/concepts/)
* [https://www.dicomlibrary.com/dicom/](https://www.dicomlibrary.com/dicom/)

