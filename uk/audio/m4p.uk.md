{
  "date" : "2021-06-09",
  "keywords" :[ "m4p", "mp3", "файл", "розширення", "формат", "що таке формат файлу m4p", "музика", "формат файлу m4p", "M4b проти MP3", "специфікація формату файлу m4p "],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Дізнайтеся про формат файлу M4P та API, які можуть створювати, конвертувати та відкривати файли M4P.",
  "title" :"M4P - формат файлу аудіокниги MPEG-4",
  "linktitle" : "M4P",
  "menu" : {
    "docs" : {
      "parent" : "audio"
}
},
  "lastmod" : "2021-06-09"
}

## Що таке файл M4P?
Файл із розширенням .m4p — це аудіофайл, який зазвичай доступний для завантаження в магазині Apple iTunes. Іншими словами, ми можемо сказати, що M4P — це файл AAC, але захищений від копіювання за допомогою керування цифровими правами (DRM). Це означає, що файли M4P можна відтворювати лише на авторизованих системах або пристроях. Зазвичай файли M4P призначені для мультимедійних пристроїв Apple. Таким чином, ці файли можна відтворювати лише на комп’ютерах Apple MacBook, подкастах, смартфонах, таких як iPhone 6 або iPhone 7.

## Формат файлу M4P
M4P означає MPEG 4 Protected (аудіо), він кодує аудіо за допомогою розширеного аудіокодека (AAC) і захищає файл від несанкціонованого використання. Цей формат файлу зазвичай вважається форматом аудіофайлу iTunes Music Store. Apple використовує свою систему керування цифровими правами FairPlay (DRM) для захисту файлів M4P. FairPlay DRM базується на технології, розробленій Veridisc. Його механізм захисту працює шляхом шифрування аудіопотоку AAC за допомогою шифрування AES. Користувач отримує головний ключ, який призначається його обліковому запису для розшифровки. Цей формат файлу було введено як заміну формату файлу MP3, оскільки спочатку MP3 не був призначений як аудіофайл, а як шар III у відеофайлі MPEG 1 або 2.


## Специфікації формату файлу M4P

Подібно до [M4A](/uk/audio/m4a/), файли M4P також складаються з послідовних блоків. Кожна послідовність має 8-байтовий заголовок і поділений на:
- 4-байтовий розмір фрагмента (старший байт, старший байт спочатку)
- 4-байтовий тип блоку - один із попередньо визначених підписів: "mdat", "moov", "pnot", "moof", "udta", "uuid", "free", "skip", "ftyp", "jP2", "wide", "load", "imap", "matt", "chap", "kmat", "clip", "crgn", "sync", "tmcd", "PICT", "scpt ", "ctab", "ssrc".

Подібно до M4A, перша послідовність у M4P матиме тип "ftype" і матиме підтип на зміщенні 8. M4P визначається підтипом, який має бути "M4P_".

Ітерація фрагментів, доки не буде виявлено фрагмент невідомого типу, створить файл M4P (MPEG-4 Audio).

## Посилання ##

* [MPEG-4, частина 14 – Вікіпедія](https://en.wikipedia.org/wiki/MPEG-4_Part_14)
* [Приклад формату та відновлення MPEG-4, частина 14 аудіо (M4A, M4B, M4P)] (https://www.file-recovery.com/m4a-signature-format.htm)

