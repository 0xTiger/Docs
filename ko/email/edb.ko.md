{
  "date" : "2019-10-11",
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"EDB 파일 형식 - Exchange 메일 데이터베이스 파일",
  "description":"EDB 파일 형식과 EDB 파일을 생성하고 열 수 있는 API에 대해 알아보세요.",
  "linktitle" : "EDB",
  "menu" : {
    "docs" : {
      "parent" : "email"
}
},
  "lastmod" : "2020-09-16"
}

## .EDB 파일이란?

파일 확장자가 .edb인 파일은 메일 관련 데이터를 저장하기 위해 Microsoft Exchange Server에서 만든 사서함 데이터베이스입니다. EDB(Exchange 데이터베이스)는 처리 중이고 SMTP가 아닌 메시지를 저장합니다. EDB는 ESE(Extensible Storage Engine) 데이터베이스 파일이라고도 하며 b-트리 구조를 사용하여 파일을 저장합니다. EDB 파일은 저장 파일이기 때문에 [PST](/ko/email/pst/) 및 [OST](/ko/email/ost/)와 같은 다른 메일 저장 파일 형식으로 변환할 수 있습니다.

## EDB 파일 형식

참조할 수 있는 공식/공개 EDB 파일 형식 사양이 없습니다. 파일 형식을 리버스 엔지니어링하는 작업이 일부 진행되어 사양이 부분적으로 디코딩되었습니다. 이에 따라 EDB 파일은 다음으로 구성됩니다.
* 파일 헤더 - 데이터베이스 파일 헤더 정보를 포함합니다.
* 고정 크기 페이지 - 테이블과 인덱스로 구성된 데이터베이스를 포함합니다.

### 데이터베이스 파일 헤더
데이터베이스 파일 헤더는 첫 번째 데이터베이스 페이지에 있으며 최소 668바이트입니다. 파일 헤더에는 다른 필드와 함께 '파일 형식 버전' 및 '파일 형식'이 포함됩니다.

#### 파일 형식
|유형|설명
---|---|
|0| 데이터베이스|
|1| 스트리밍|

`참고:` 이러한 유형의 식별자는 알려져 있지 않습니다.

#### 파일 형식 버전
EDB의 원래 형식은 1997년 4월에 시작되었으며 이후 변경 사항에 따라 계속 발전했습니다.

|개정 날짜|버전|개정|설명
---|---|---|---|
|1997년 4월| 0x00000620|0x00000000| 원래 운영 체제 베타 형식입니다.|
|1997년 5월 |0x00000620|0x00000001| 조건부 인덱싱 및 OLD에 대한 카탈로그에 열을 추가하십시오.|
|1997년 6월|0x00000620|0x00000002|IDB에 fLocalizedText 플래그를 추가합니다.|
|1997년 10월|0x00000620|0x00000003|스페이스 트리 루트 페이지에 SPLIT_BUFFER를 추가합니다.|
|1998년 1월|0x00000620|0x00000002|ESE97이 앞으로 호환되도록 유지하려면 개정판을 되돌립니다.|
||0x00000620|0x00000003|카탈로그에 태그가 지정된 새 열 추가("CallbackData" 및 "CallbackDependencies").|
|1998년 5월|0x00000620|0x00000004|Super Long Value(SLV) 지원: signSLV, fSLVExists in dbheader.|
|1998년 5월|0x00000620|0x00000005|새로운 SLV 공간 트리.|
|1998년 10월|0x00000620|0x00000006|SLV 공간 지도.|
|1998년 12월|0x00000620|0x00000007|4바이트 IDXSEG.|
|1999년 1월|0x00000620|0x00000008|새 템플릿 열 형식입니다.|
|1999년 6월|0x00000620|0x00000009|템플릿 열을 정렬했습니다. Windows XP SP3에서 사용|
||0x00000620|0x0000000b|Exchange에서 사용되는 ECC 체크섬이 있는 페이지 헤더 포함|
||0x00000620|0x0000000c|Windows Vista(SP0)에서 사용|
||0x00000620|0x00000011|2KiB, 16KiB 및 32KiB 페이지 지원.추가 ECC 체크섬이 있는 확장 페이지 헤더.열 압축.공간 힌트.Windows 7(SP0)에서 사용|
|1999년 5월|0x00000623|0x00000000|새로운 공간 관리자.|

### 데이터베이스 파일

EDB 데이터베이스 파일에는 데이터베이스의 모든 테이블에 대한 스키마가 포함되어 있습니다. 또한 모든 데이터베이스 테이블에 대한 레코드와 테이블에 대한 인덱스도 포함합니다. 위치는 다음 식별자에 의해 결정됩니다.

* JetCreate데이터베이스
* JetCreateDatabase2
* JetAttach 데이터베이스
* JetAttachDatabase2

이를 바탕으로 데이터베이스의 상태는 다음과 같이 평가할 수 있다.

|값|식별자|설명
---|---|---|
|1|JET_dbstateJustCreated|데이터베이스가 방금 생성되었습니다.|
|2|JET_dbstateDirtyShutdown|데이터베이스를 사용하거나 이동할 수 있으려면 하드 또는 소프트 복구를 실행해야 합니다. 이 상태에서 데이터베이스를 이동하려고 해서는 안 됩니다.|
|3|JET_dbstateCleanShutdown|데이터베이스가 깨끗한 상태입니다. 데이터베이스는 로그 파일 없이 연결할 수 있습니다.|
|4|JET_dbstateBeingConverted|데이터베이스가 업그레이드 중입니다.|
|5|JET_dbstateForceDetachInternal|이 값은 WindowsXP에서 도입되었습니다|
 

## 참고문헌
* [ESE(Extensible Storage Engine) 데이터베이스 파일(EDB) 사양](https://github.com/libyal/libesedb/tree/main/documentation)

