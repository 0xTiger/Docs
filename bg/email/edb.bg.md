{
  "date" : "2019-10-11",
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"Файлов формат EDB – файл с база данни на Exchange Mail",
  "description":"Научете повече за EDB файловия формат и API, които могат да създават и отварят EDB файлове.",
  "linktitle" : "EDB",
  "menu" : {
    "docs" : {
      "parent" : "email"
}
},
  "lastmod" : "2020-09-16"
}

## Какво е EDB файл?

Файл с файлово разширение .edb е база данни на пощенска кутия, създадена от Microsoft Exchange Server за съхраняване на данни, свързани с пощата. EDB, Exchange Database, съхранява съобщения, които са в процес и не са SMTP. EDB са известни също като файлове с база данни на Extensible Storage Engine (ESE) и съхраняват файлове, използвайки b-дървовидна структура. Като файлове за съхранение, EDB файловете могат да бъдат конвертирани в други файлови формати за съхранение на поща като [PST](/bg/email/pst/) и [OST](/bg/email/ost/).

## EDB файлов формат

Няма налични официални/отворени спецификации на файловия формат на EDB, които могат да бъдат цитирани. Беше постигнат известен напредък за обратното инженерство на файловия формат, което доведе до частично декодиране на спецификациите. Според тях EDB файлът се състои от:
* Заглавка на файл - Съдържа информация за заглавката на файла на базата данни
* Страници с фиксиран размер - Съдържа базата данни, която се състои от таблици и индекси

### Заглавка на файла на базата данни
Заглавката на файла на базата данни се намира в първата страница на базата данни и е най-малко 668 байта. Заглавката на файла съдържа „Версия на файловия формат“ и „Тип на файла“ в допълнение към други полета.

#### Типове файлове
|Тип|Описание
---|---|
|0| База данни|
|1| Поточно предаване|

`Забележка:` Идентификаторите за тези типове не са известни.

#### Версия на файловия формат
Оригиналният формат на EDB започна през април 1997 г. и продължи да се развива за промени след това.

|Дата на версия|Версия|Ревизия|описание
---|---|---|---|
|април 1997| 0x00000620|0x00000000| Оригинален бета формат на операционната система.|
|Май 1997 |0x00000620|0x00000001| Добавяне на колони в каталога за условно индексиране и СТАРИ.|
|Юни 1997|0x00000620|0x00000002|Добавете флага fLocalizedText в IDB.|
|Октомври 1997|0x00000620|0x00000003|Добавяне на SPLIT_BUFFER към коренните страници на космическото дърво.|
|Януари 1998|0x00000620|0x00000002|Върнете ревизията, за да може ESE97 да остане съвместим напред.|
||0x00000620|0x00000003|Добавяне на нови маркирани колони към каталога („CallbackData“ и „CallbackDependencies“).|
|Май 1998|0x00000620|0x00000004|Поддръжка на супер дълга стойност (SLV): signSLV, fSLVE съществува в dbheader.|
|Май 1998|0x00000620|0x00000005|Ново SLV космическо дърво.|
|октомври 1998|0x00000620|0x00000006|космическа карта на SLV.|
|декември 1998|0x00000620|0x00000007|4-байтов IDXSEG.|
|Януари 1999|0x00000620|0x00000008|Нов формат на шаблонна колона.|
|Юни 1999|0x00000620|0x00000009|Сортирани шаблонни колони. Използва се в Windows XP SP3|
||0x00000620|0x0000000b|Съдържа заглавката на страницата с ECC контролна сума, използвана в Exchange|
||0x00000620|0x0000000c|Използва се в Windows Vista (SP0)|
||0x00000620|0x00000011|Поддръжка за страници от 2 KiB, 16 KiB и 32 KiB. Разширен горен колонтитул на страница с допълнителни ECC контролни суми. Компресия на колони. Подсказки за пространство. Използва се в Windows 7 (SP0)|
|Май 1999|0x00000623|0x00000000|Нов Space Manager.|

### Файлове с база данни

Файлът на EDB базата данни съдържа схемата за всички таблици в базата данни. В допълнение, той също така включва записи за всички таблици на базата данни и индекси за таблиците. Местоположението му се определя от следните идентификатори.

* JetCreateDatabase
* JetCreateDatabase2
* JetAttachDatabase
* JetAttachDatabase2

Въз основа на тях състоянието на базата данни може да се оцени, както следва.

|Стойност|Идентификатор|Описание
---|---|---|
|1|JET_dbstateJustCreated|Базата данни току-що беше създадена.|
|2|JET_dbstateDirtyShutdown|Базата данни изисква твърдо или меко възстановяване, за да стане използваема или преместваема. Не трябва да се опитвате да премествате бази данни в това състояние.|
|3|JET_dbstateCleanShutdown|Базата данни е в чисто състояние. Базата данни може да бъде прикачена без лог файлове.|
|4|JET_dbstateBeingConverted|Базата данни се надгражда.|
|5|JET_dbstateForceDetachInternal|Тази стойност е въведена в WindowsXP|
 

## Препратки
* [Спецификации на файл с база данни (EDB) на Extensible Storage Engine (ESE)](https://github.com/libyal/libesedb/tree/main/documentation)

