{
  "date" : "2021-06-09",
  "keywords" :[ "m4p", "mp3", "файл", "разширение", "формат", "какво е m4p файлов формат", "музика", "m4p файлов формат", "M4b срещу MP3", "спецификация на m4p файлов формат "],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Научете за файловия формат M4P и API, които могат да създават, конвертират и отварят M4P файлове.",
  "title" :"M4P - MPEG-4 файлов формат за аудиокнига",
  "linktitle" : "M4P",
  "menu" : {
    "docs" : {
      "parent" : "audio"
}
},
  "lastmod" : "2021-06-09"
}

## Какво е M4P файл?
Файлът с разширение .m4p е аудио файл, който обикновено е достъпен за изтегляне в магазина на Apple iTunes. С други думи можем да кажем, че M4P е AAC файл, но е защитен от копиране чрез използване на Digital Rights Management (DRM). Това означава, че M4P файловете могат да се възпроизвеждат само на оторизирани системи или устройства. Обикновено M4P файловете са специфични за мултимедийни устройства на Apple. Така че тези файлове могат да се възпроизвеждат само на Apple macbook, подкасти, смарт телефони като iPhone 6 или iPhone 7.

## M4P файлов формат
M4P означава MPEG 4 Protected (аудио) и кодира аудиото с усъвършенстван аудио кодек (AAC) и защитава файла от неразрешено използване на файла. Този файлов формат обикновено се счита за аудио файлов формат на iTunes Music Store. Apple използва своята система за управление на цифровите права FairPlay (DRM), за да защити M4P файлове. FairPlay DRM е базиран на технология, разработена от Veridisc. Неговият защитен механизъм работи чрез криптиране на AAC аудио потока с помощта на AES криптиране. Потребителят получава главен ключ, който се присвоява на неговия акаунт за дешифриране. Този файлов формат беше въведен като заместител на файловия формат MP3, тъй като MP3 първоначално не беше предназначен като аудио файл, а като слой III във видео файл MPEG 1 или 2.


## Спецификации на файловия формат M4P

Подобно на [M4A](/bg/audio/m4a/), M4P файловете също се състоят от последователни парчета. Всяка част има 8 байтова заглавка и е подразделена като:
- 4-байтов размер на част (big-endian, старши байт първи)
- 4-байтов тип парче - един от предварително дефинираните подписи: "mdat", "moov", "pnot", "moof", "udta", "uuid", "free", "skip", "ftyp", "jP2", "wide", "load", "imap", "matt", "chap", "kmat", "clip", "crgn", "sync", "tmcd", "PICT", "scpt ", "ctab", "ssrc".

Подобно на M4A, първата част в M4P ще бъде от тип "ftype" и има подтип при отместване 8. M4P, дефиниран от подтип, който трябва да бъде "M4P_".

Итериране на парчета, докато бъде открита част от неизвестен тип, ще състави M4P (MPEG-4 Audio) файл.

## Препратки ##

* [MPEG-4 част 14 - от Wikipedia](https://en.wikipedia.org/wiki/MPEG-4_Part_14)
* [MPEG-4 част 14 аудио (M4A, M4B, M4P) формат и пример за възстановяване](https://www.file-recovery.com/m4a-signature-format.htm)

