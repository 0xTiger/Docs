{
  "date" : "2019-10-11",
  "keywords" :[ "dicom файл", "dicom файлов формат", "какво е dicom файл", "файл", "dicom пример", "dicom файлово разширение", "разширение", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"DICOM – файлов формат за цифрови изображения и комуникации",
  "description":"Научете за DICOM файловия формат и API, които могат да създават и отварят DICOM файлове.",
  "linktitle" : "DICOM",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## Какво е DICOM файл?

DICOM е акронимът на Digital Imaging and Communications in Medicine и се отнася до областта на медицинската информатика. DICOM се използва за интегриране на медицински устройства за изображения като принтери, сървъри, скенери и т.н. от различни доставчици и също така съдържа идентификационни данни на всеки пациент за уникалност. DICOM файловете могат да се споделят между две страни, ако могат да получават данни за изображения във формат DICOM. Комуникационната част на DICOM е протокол на приложния слой и използва TCP/IP за комуникация между обекти. Версиите, поддържани от уеб услугите, са 1.0, 1.1, 2 или по-нови.

## История ##

DICOM е разработен съвместно от Американския колеж по радиология (ACR) и Националната асоциация на производителите на електротехника (NEMA) за обмен и гледане на медицински изображения като ЯМР, КТ и ултразвукови изображения. Първоначално беше трудно да се декодират изображенията, които машините произвеждаха. Затова ACR и NEMA заедно формираха екип през 1983 г., който пусна първия си стандарт, ACR/NEMA 300 през 1985 г. Втората версия беше пусната през 1988 г., която беше по-популярна сред доставчиците, но скоро се разбра, че втората версия също се нуждае от подобрение. Третата версия на стандарта е пусната през 1993 г. като "DICOM". 3.0 все още е най-новата версия, но непрекъснато се актуализира от 1993 г.

## DICOM файлов формат ##

DICOM е комбинация от дефиниране на файлов формат и протокол за мрежова комуникация. DICOM използва разширението .DCM. .DCM съществува в два различни формата, т.е. формат 1.x и формат 2.x. DCM формат 1.x се предлага допълнително в две версии - нормална и разширена. За уеб услугите на DICOM се използват HTTP и HTTPS протоколи.

### Заглавка на файл ###

Заглавката на файла съдържа 128 байта Преамбюл на файла и 4 байта DICOM префикс.

**Преамбюл # 128 байта**|**Префикс # 4 байта „D, I, C, M**

**Преамбюл** се използва за достъп до изображенията и други данни в DICOM файл, осигуряващ съвместимост с често използвани файлови формати на изображения.

**Префикс** съдържа низа "DICM" като главни букви.

### Набор от данни ###

Всеки файл трябва да съдържа единичен набор от данни, представляващ SOP екземпляр и SOP клас със свързан IOD. Наборът от данни е представяне на информация от реалния свят. Наборът от данни съдържа елементи от данни, а елементите от данни съдържат стойности на атрибутите на този обект. Структурата на атрибутите е специфицирана в IOD. DICOM обект с данни се състои от редица атрибути, включително елементи като име, ID и т.н., както и един специален атрибут, съдържащ данните за пикселите на изображението.

### Елементи от данни ###

Елементът от данни се състои от елемент от данни Tag, дължина на стойността и стойност за елемента от данни. Има 5 типа елементи от данни, а именно задължителни елементи от данни от тип 1, условни елементи от данни от тип 1C, задължителни елементи от данни от тип 2, условни елементи от данни от тип 2C и незадължителни елементи от данни от тип 3. Основни Три типа структури на елементи от данни са както следва.

**Елемент от данни с явен VR**

|Номер на група|Номер на елемент|Представяне на стойност|Запазено|Дължина на стойност|Поле за стойност
---|---|---|---|---|---|
|2 байта|2 байта|2 байта|2 байта # 0x00, 0x00|4 байта|"Дължина на стойността в байтове"

**Елемент от данни с явен VR**

|Номер на група|Номер на елемент|Представяне на стойност|Дължина на стойност|Поле за стойност
---|---|---|---|---|
|2 байта|2 байта|2 байта|2 байта|"Байтове с дължина на стойността"

**Елемент от данни с имплицитна VR**


|Номер на група|Номер на елемент|Дължина на стойност|Поле за стойност
---|---|---|---|
|2 байта|2 байта|4 байта|"Байтове за дължина на стойността"

1. **Елемент на данни**: Подредено цяло число, което представлява номера на групата и номера на елемента
1. **Представяне на стойност VR**: VR е символен низ, който представлява VR на елемента от данни.
1. **Дължина на стойността**: дали цяло число без знак представлява изричната дължина на полето за стойност.
1. **Поле за стойност**: Описва стойностите на елементите от данни.

## Синтаксис за прехвърляне ##

Синтаксисът за прехвърляне е набор от правила за кодиране за недвусмислено представяне на по-абстрактни синтаксиси. С помощта на трансферен синтаксис комуникиращите субекти преговарят за общи техники за кодиране, които поддържат.

## SOP ##

Съюзът на IOD и DIMSE дефинира SOP клас. Дефиницията на SOP Class съдържа правилата и семантиката, които могат да ограничат използването на услугите в DIMSE Service Group или атрибутите на IOD. Примери за сервизни елементи са Store, Get, Find, Move и т.н. Примери за обекти са CT изображения, MR изображения, но също така включват списъци с график, опашки за печат и т.н.

## Услуги ##

DICOM предоставя различни услуги, най-вече свързани с предаване на данни. Всеки един е описан накратко по-долу:


**Store:** Услугата DICOM Store изпраща изображения или други обекти до система за архивиране и комуникация на изображения (PACS) или сървър.


**Ангажимент за съхранение:** Услугата за ангажимент за съхранение се използва за потвърждение, че дадено изображение е било постоянно съхранено на устройство на всякакъв тип носител.


**Запитване/извличане:** Тази услуга позволява на работна станция да намира списъците с изображения или други обекти и след това да ги извлича от PACS.


**Работен списък за модалност:** Услугата за работен списък за модалност дава списък с процедури за изображения, които са планирани за изпълнение от устройство за получаване на изображения.


**Печат:** Тази услуга изпраща изображения на принтер.

## Номера на портове през IP ##

DICOM използва следните TCP и UDP портове:

1. 104
1. 2761
1. 2762
1. 11112

## Препратки ##

* [https://en.wikipedia.org/wiki/DICOM](https://en.wikipedia.org/wiki/DICOM)
* [https://www.leadtools.com/sdk/medical/dicom-spec](https://www.leadtools.com/sdk/medical/dicom-spec)
* [https://www.dicomstandard.org/concepts/](https://www.dicomstandard.org/concepts/)
* [https://www.dicomlibrary.com/dicom/](https://www.dicomlibrary.com/dicom/)

