{
  "date" : "2019-10-11",
  "keywords" :[ "dicom ファイル", "dicom ファイル形式", "dicom ファイルとは", "ファイル", "dicom の例", "dicom ファイルの拡張子","拡張子", "形式" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"DICOM - デジタル画像および通信ファイル形式",
  "description":"DICOM ファイル形式と,DICOM ファイルを作成して開くことができる API について学びます。",
  "linktitle" : "DICOM",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## DICOM ファイルとは?

DICOM は Digital Imaging and Communications in Medicine の頭字語で、医療情報学の分野に属します。 DICOM は、さまざまなベンダーのプリンター、サーバー、スキャナーなどの医用画像デバイスの統合に使用され、一意性のために各患者の識別データも含まれています。 DICOM ファイルは、DICOM 形式の画像データを受信できる場合、2 者間で共有できます。 DICOM の通信部分はアプリケーション層プロトコルであり、TCP/IP を使用してエンティティ間の通信を行います。 Web サービスでサポートされているバージョンは、1.0、1.1、2 以降です。

## 歴史 ＃＃

DICOM は、MRI、CT スキャン、超音波画像などの医療画像の交換と表示のために、American College of Radiology (ACR) と National Electrical Manufacturers Association (NEMA) によって共同で開発されました。当初、機械が生成した画像を解読するのは困難でした。そのため、ACR と NEMA は 1983 年にチームを結成し、1985 年に最初の標準である ACR/NEMA 300 をリリースしました。2 番目のバージョンは 1988 年にリリースされ、ベンダーの間でより人気がありましたが、すぐに 2 番目のバージョンにも改善が必要であることがわかりました。この規格の第 3 版は、1993 年に「DICOM」としてリリースされました。 3.0 はまだ最新バージョンですが、1993 年から継続的に更新されています。

## DICOM ファイル形式 ##

DICOM は、ファイル形式の定義とネットワーク通信プロトコルの組み合わせです。 DICOM は .DCM 拡張子を使用します。 .DCM には、形式 1.x と形式 2.x という 2 つの異なる形式があります。 DCM Format 1.x はさらに、通常版と拡張版の 2 つのバージョンで利用できます。 DICOM の Web サービスには、HTTP および HTTPS プロトコルが使用されます。

### ファイルヘッダー ###

ファイル ヘッダーには、128 バイトのファイル プリアンブルと 4 バイトの DICOM プレフィックスが含まれます。

**プリアンブル # 128 バイト**|**プレフィックス # 4 バイト "D、I、C、M**

**プリアンブル**は、一般的に使用される画像ファイル形式との互換性を提供する DICOM ファイル内の画像やその他のデータにアクセスするために使用されます。

**Prefix** には、文字列 "DICM" が大文字として含まれています。

### データセット ###

各ファイルには、関連する IOD を持つ SOP インスタンスと SOP クラスを表す単一のデータ セットが含まれている必要があります。データセットは、実世界の情報を表現したものです。データセットにはデータ要素が含まれ、データ要素にはそのオブジェクトの属性の値が含まれます。属性の構造は IOD で指定されます。 DICOM データ オブジェクトは、名前、ID などの項目を含む多数の属性と、画像ピクセル データを含む 1 つの特別な属性で構成されます。

### データ要素 ###

データ要素は、データ要素タグ、値の長さ、およびデータ要素の値で構成されます。データ要素には、タイプ 1 必須データ要素、タイプ 1C 条件付きデータ要素、タイプ 2 必須データ要素、タイプ 2C 条件付きデータ要素、およびタイプ 3 オプション データ要素の 5 つのタイプがあります。基本 データ要素の構造は以下の 3 種類です。

**明示的な VR を持つデータ要素**

|グループ番号|要素番号|値の表現|予約済み|値の長さ|値フィールド
---|---|---|---|---|---|
|2 バイト|2 バイト|2 バイト|2 バイト # 0x00, 0x00|4 バイト|"値の長さのバイト"

**明示的な VR を持つデータ要素**

|グループ番号|要素番号|値の表現|値の長さ|値フィールド
---|---|---|---|---|
|2 バイト|2 バイト|2 バイト|2 バイト|"値の長さのバイト"

**暗黙の VR を持つデータ要素**


|グループ番号|要素番号|値の長さ|値フィールド
---|---|---|---|
|2 バイト|2 バイト|4 バイト|"値の長さバイト"

1. **Data Element Tag**: グループ番号と要素番号を表す順序付き整数
1. **Value Representation VR**: VR はデータ要素の VR を表す文字列です。
1. **値の長さ**: 値フィールドの明示的な長さを表す符号なし整数です。
1. **値フィールド**: データ要素の値を記述します。

## 転送構文 ##

転送構文は、より抽象的な構文を明確に表現するためのエンコードの一連の規則です。転送構文の助けを借りて、通信エンティティは、サポートする一般的なエンコーディング技術についてネゴシエートします。

## SOP ##

IOD と DIMSE の結合は、SOP クラスを定義します。 ＳＯＰクラス定義は、ＤＩＭＳＥサービスグループまたはＩＯＤの属性におけるサービスの使用を制限する可能性がある規則およびセマンティクスを含む。サービス要素の例は、Store、Get、Find、Move などです。オブジェクトの例は、CT 画像、MR 画像ですが、スケジュール リスト、印刷キューなども含まれます。

## サービス ##

DICOM は、主にデータの通信に関連するさまざまなサービスを提供します。それぞれについて、以下で簡単に説明します。


**Store:** DICOM Store サービスは、画像またはその他のオブジェクトを画像保管通信システム (PACS) またはサーバーに送信します。


**ストレージ コミットメント:** ストレージ コミットメント サービスは、イメージが任意の種類のメディアのデバイスに永続的に保存されていることを確認するために使用されます。


**クエリ/取得:** このサービスにより、ワークステーションは画像やその他のオブジェクトのリストを見つけて、PACS から取得できます。


**モダリティ ワークリスト:** モダリティ ワークリスト サービスは、画像取得デバイスによる実行がスケジュールされている画像処理のリストを提供します。


**印刷:** このサービスは、画像をプリンターに送信します。

## IP 上のポート番号 ##

DICOM は、次の TCP および UDP ポートを使用します。

1.104
1. 2761
1. 2762
1.11112

## 参照 ##

* [https://en.wikipedia.org/wiki/DICOM](https://en.wikipedia.org/wiki/DICOM)
* [https://www.leadtools.com/sdk/medical/dicom-spec](https://www.leadtools.com/sdk/medical/dicom-spec)
* [https://www.dicomstandard.org/concepts/](https://www.dicomstandard.org/concepts/)
* [https://www.dicomlibrary.com/dicom/](https://www.dicomlibrary.com/dicom/)

