{
  "date" : "2021-03-11",
  "keywords" :[ "APNX", "Amazon Page Number Index", "extension", "file", "format", "eBook", "Amazon Kindle" ],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description":"Amazon APNX ファイル形式と,APNX ファイルを作成して開くことができる API について学びます。",
  "title" :"APNX - Amazon ページ番号インデックス",
  "linktitle" : "APNX",
  "menu" : {
    "docs" : {
      "parent" : "ebook"
}
},
  "lastmod" : "2021-05-28"
}

## .APNX ファイルとは? ##

.apnx 拡張子を使用する Amazon ページ番号インデックス ファイルは、eBook ファイル タイプです。 Amazon Kindleで使用。これらのファイルは、実際には Kindle デバイスで使用されるページネーション ファイルとして知られています。そのため、APNX ファイルは通常、Kindle 電子書籍のページをマークするために作成されます。ページネーション機能は、3.1 ファームウェア以降、Amazon Kindle デバイスで開始されました。 APNX ファイルでページ インデックスを検索し、元の印刷本のページ番号にマップします。これらのファイルは、Amazon eBooks ファイルと共に Kindle デバイスに保存されます。 APNX ファイルを開いたり編集したりすることはできません。

## APNX ファイル形式の仕様 ##

＃＃＃ レイアウト

|バイト|コンテンツ|コメント|
---|---|---|
|4 |00010001 |形式識別子。 65537 リトルエンディアンの値。|
|4 |次の開始 |最初のヘッダーの終了位置の後のオフセット。ヘッダー情報の新しいシーケンスを開始します|
|4 |長さ|最初のヘッダーの長さ|
|N |最初のヘッダー |コンテンツ ヘッダーを含む文字列。次のシーケンスを開始します|
|2 |不明 |常に 1|
|2 |長さ | 2 番目のヘッダーの長さ|
|2 |ページ数 |ページを表す 2 番目のヘッダーの後の合計バイト数。この合計には、pageMap によって無視されるバイトが含まれます。|
|2 |不明 |常に 32|
|N |2 番目のヘッダー |ページ マッピング ヘッダーを含む文字列|
|4*N |パディング |ページ マッピング ヘッダーの最初の数字は、0 バイトの数を示します。|
|4*N |ページリスト ||

### コンテンツ ヘッダー

コンテンツ ヘッダーは、キーと値のペアを含む {} で囲まれた文字列で構成されます。

|コンテンツ|コメント|
---|---|
|コンテンツガイド|ガイド|
|アシン |本の Kindle バージョンの Amazon 識別子。|
|cdeType | MOBI cdeType。電子ブックの場合は常に EBOK にする必要があります。|
|fileRevisionId |このファイルのリビジョン。|

＃＃＃＃ 例
```
{"contentGuid":"d8c14b0","asin":"B000JML5VM","cdeType":"EBOK","fileRevisionId":"1296874359405"}
```
### ページ マッピング ヘッダー
ページ マッピング ヘッダーは、キーと値のペアを含む {} で囲まれた文字列で構成されます。

|コンテンツ |コメント|
---|---|
|アシン |ページが対応する紙の書籍の ISBN 10 |
|ページマップ| 3 つの値のタプル。次のようになります: "(N,N,N)\
1) ページ番号シーケンスを開始するヘッダーの後のバイト数\
2) 不明\
3) 不明\|
＃＃＃＃ 例
```
{"asin":"1906694184","pageMap":"(4,a,1)"}
```

### ページリスト

ページ リストは、生の HTML 内の一連のオフセットです。各
値は新しいページの開始です。すべてのエントリは 4 バイトのビッグ エンディアンです
整数。



## 参考文献

※【Amazon APNXファイル形式】(https://nachtimwald.com/2011/02/09/amazon-apnx-file-format/)
* [APNX - MobileRead Wiki による](https://wiki.mobileread.com/wiki/APNX)

