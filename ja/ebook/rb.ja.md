{
  "date" : "2021-03-08",
  "keywords" :[ "RB", "Nuvo Media の Rocket eBook デバイス", "ファイル", "拡張子", "フォーマット", "eBook" ],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description":"Nuvo Media の Rocket eBook デバイスの RB ファイル形式と,RB ファイルを作成して開くことができる API について学びます。",
  "title" :"RB - ロケット eBook ファイル",
  "linktitle" : "RB",
  "menu" : {
    "docs" : {
      "parent" : "ebook"
}
},
  "lastmod" : "2021-03-08"
}

## .RB オプション番号

拡張子が .rb のファイルには、Rocket eBook のコンテンツが含まれています。 Rocket eBook は実際には Nuvo Media 製のデバイスです。彼らは 1998 年にこのデバイスをリリースしました。Rocket eBook は画像を表示できますが、白黒表示のみです。 4.5 x 3 インチのタッチスクリーンに 106 dpi または 480 x 320 ピクセルの画面があります。 Rocket eBook は、シリアル ポート接続を介してコンピュータに接続し、RB ファイル形式で eBook をダウンロードします。 RB ファイルは DRM を使用できますが、この技術は最新の電子書籍では使用されていません。 RB ファイルには、従来、画像を含む HTML ファイルと、すべてのメタデータ (.info) を含む疑似 OPF ファイルが含まれています。

## RB ファイル形式の技術仕様 ##

ファイルの最初の 4 バイトにマジック ナンバー (16 進数) が表示されます: B0 0C B0 0C。

次の 2 バイトは、メジャー バージョン 2 とマイナー バージョン 0 を表す "02 00" のようなバージョン番号のようです。

次の 4 バイトにはテキスト「NUVO」が含まれ、その後に 4 バイトの 00h が続きます。

次の 4 バイトは、本が作成された日付で、int16 としてエンコードされます。これにより、オフセット 0Eh になります。 ORocketLibrary の古いバージョンでは、年の完全な値がエンコードされていました (つまり、1999 年は "CF 07"、2000 年は "D0 07" でした)。最近のバージョンでは、tm_year は逐語的に格納されます。つまり、2000 年を表す 100 ("64 00") です。年の後には、1 番目の相対月番号を表す int8 と、月の日を表す int8 が続きます。

次の 6 バイトは 00h です。時間設定の場合、これらは予約されている場合があります。

「目次」の絶対オフセットは、int32 のオフセット 18h に含まれています。

この後に、.rb ファイルの長さを含む int32 が続きます。これは、ファイルが完全かどうかを判断するために使用されます。

このバイト全体のチャンク (20h から 128h) は、暗号化されたタイトルだけが必要とするようです。暗号化されていないタイトルでは、常にゼロです。

ほとんどの場合、目次が続きます (オフセット 128)。 ToC の「ページ」エントリ (.rb ファイル セクション) の数の int32 カウントで始まります。各エントリは、名前 (32 バイトまでゼロで埋められる) と、それに続く 3 つの int32 (データ セグメントの長さ、.rb ファイル内の位置、およびこのエントリのフラグ) で構成されます。現在、既知の値は、1 (暗号化)、2 (情報ページ)、および 8 (デフレート) です。名前はすべて、必要に応じて調整され、すべてが一意になるようにします。

## 参考文献

* [電子リーダー - MobileRead による](https://en.wikipedia.org/wiki/E-reader)

