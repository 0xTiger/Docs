{
  "date" : "2019-10-11",
  "keywords" :[ "osm ファイル", "osm ファイルとは", "ファイル", "osm の例", "osm ファイルの拡張子","拡張子", "形式" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"OSM - OpenStreetMap ファイル形式",
  "description":"OSM ファイル形式と,OSM ファイルを作成して開くことができる API について学びます。",
  "linktitle" : "OSM",
  "menu" : {
    "docs" : {
      "parent" : "gis"
}
},
  "lastmod" : "2019-09-10"
}

## .OSM ファイルとは?

OpenStreetMap (OSM) は、さまざまな種類のファイルにあるボランティアによる地理情報ストアの膨大なコレクションであり、さまざまなエンコード方式を使用してこのデータをビットとバイトに変換します。 OSM は、自由に編集可能な世界地図を作成するための共同作業です。この共同作業の主な成果は、マップ自体ではなく、地理データです。世界の多くの国で地理情報の使用または入手が制限されているため、OSM を作成する必要性が生じています。 OSM から利用可能なデータは、従来のアプリケーション (Facebook、Craigslist など) の Google マップや GPS 受信機のアプリケーションのデフォルト データに取って代わる準備ができています。データ ソース。

## 簡単な歴史 ##

ウィキペディアの成功に触発され、2004 年に英国の起業家であるスティーブ コーストは、英国でこのコミュニティ ベースの世界地図プロジェクトを作成しました。彼は当初、英国のマッピングに焦点を当てていました。 OpenStreetMap Foundation は、2006 年 4 月に最初に設立され、誰にとっても無料の地理空間の進化、拡張、流通をサポートしています。 2006 年 12 月、Yahoo は OpenStreetMap の地図作成用の航空写真を支援しました。オランダの完全な道路データとインドと中国の幹線道路データは、2007 年 4 月に Automotive Navigation Data (AND) によって OSM に提供されました。 2007 年 12 月、オックスフォード大学は、OpenStreetMap データをメインの Web サイトに統合した最も著名な組織でした。それ以来、200 万人を超える登録ユーザーが、GPS デバイス、航空写真、手動調査を使用して、このプロジェクトにデータを提供しています。このコミュニティ提供のデータは、Open Database License の下で利用できます。英国に登録された非営利団体の OpenStreetMap Foundation が OSM サイトを維持していました。

## OSM ファイル形式 ##

地理データを保存する方法やファイル形式はたくさんありますが、**OSM** ファイル形式は OpenStreetMap に限定されています。 OSM は、インターネット上で簡単に転送できるように特別に設計された標準フォーマットです。 XML 構成 .osm ファイルでコード化された、構造化された順序付けられた形式。 OpenStreetMap には、トポロジ データ構造を格納する 4 つのピボット要素があります。

{{< figure src="../OSM.png" alt="OSM ファイル形式" >}}


|ノード|ウェイ|リレーション|タグ
---|---|---|---|
| |<ul><li>緯度と経度のペアとして格納されている地理的位置を表します。</li><li>山頂など、サイズのないマップ フィーチャを表すために使用されます。</li></ul> | |<ul><li>ポリラインまたはポリゴンを表すノードのソートされたリスト</li><li>道路や川などの線形フィーチャと、駐車場のジャングルや公園などのゾーンを表します。</li></ul> | |<ul><li>ノードとウェイのソートされたリストは、道路上のバリアと U ターン、高速道路が異なる既存のウェイと穴のある領域にまたがるように、それらの関係を表します。</li></ul> | |<ul><li>マップ オブジェクトに関するメタデータを保存します。* 常に任意のノード、ウェイ、またはリレーションに関連付けられます。</li></ul>


タグは、OpenStreetMap で地上の物理的特徴 (建物や道路など) を特徴付けるために使用されます。各タグは、その特定のノードまたはリレーションによって表されるフィーチャの地理的特性を関連付けます。この無料のタグ付けシステムでは、機能を説明するために、無制限の数の属性をマップに含めることができます。登録ユーザーによって承認された特定のキーと値の組み合わせは、頻繁に使用されるタグの非公式な標準として機能します。ただし、以前にマップされていなかったフィーチャの属性を分析するために新しい側面が必要な場合はいつでも、新しいタグを作成できます。ほとんどの機能は、説明のために少数のタグのみを使用しています。

OSM はメイン データを格納するために 3 種類のファイルを使用します。

OSM は、これらすべてのファイルをフォーマットの詳細に関する情報とともに処理します。ただし、これらのファイルによって同じ内部オブジェクトが生成されます。データ ファイルの場合、OSM オブジェクトの可視フラグは常に true ですが、履歴ファイルと変更ファイルには当てはまりません。

一般的に使用される OSM ファイル形式には多様性があります。ファイル形式は、ディスクまたはワイヤ上のコンテンツ エンコーディングをビットとバイトで定義します。 OSM は、これらのフォーマットを最大限に読み書きできます。

**XML**

元の OSM 形式は XML ベースです。メインの OSM データベース API の戻りデータは XML 形式です。

**PBF**

Protocol Buffers エンコーディングはバイナリ形式に基づいており、最もコンパクトな形式の 1 つです。

**O5M/O5C**

バイナリ形式ベースの単純な形式ですが、比較的あまり使用されていません。 OSM はこの形式を読み取ることはできますが、書き込むことはできません。

**OPL**

標準の UNIX コマンド ライン ツールで使用するために提案された単純な形式。 CSV ファイルに近く、1 行に 1 つの OSM エンティティを許可します。

**デバッグ**

デバッグ用に作成するためのテキストベースの形式。 OSM はこの形式に書き込むことはできますが、読み取ることはできません。

**ブラックホール**

すべてのデータを破棄するダミー形式。 OSM はこの形式に書き込むことはできますが、読み取ることはできません。

## OSM データストレージ ##

OSM のメインの **PostgreSQL** データベースは、PostGIS 拡張子を持つ OSM データのメイン コピーを保持します。データ プリミティブごとに、メイン データベースは、行に個々のオブジェクトが格納されるテーブルを維持します。すべての編集はこのデータベースを更新し、他のすべてのフォーマットはこのデータベースを使用して形成されます。ある場所から別の場所にデータを転送するために、多数のダウンロード可能なデータベース プールが作成されます。 1 つは XML を使用し、もう 1 つは Protocol Buffer Binary Format (PBF) を使用して、これらのプールを定義します。完全なデータは、planet.osm というファイルに保存されます。

## OSM ファイルの圧縮 ##

テキストベースの形式 (XML、OPL、およびデバッグ) は、オプションで gzip または bzip2 圧縮を使用します。

## 参照 ##

* [OSM ファイル形式マニュアル](https://osmcode.org/file-formats-manual/#file-types)
* [OpenStreetMap](https://en.wikipedia.org/wiki/OpenStreetMap#History)
* [OSM を学ぶ](https://learnosm.org/en/osm-data/getting-data/)

