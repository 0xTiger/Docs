{
  "date" : "2021-03-11",
  "keywords" :["APNX","亚马逊页码索引","扩展","文件","格式","电子书","亚马逊 Kindle"],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description":"了解可创建和打开 APNX 文件的 Amazon APNX 文件格式和 API。",
  "title" :"APNX - 亚马逊页码索引",
  "linktitle" : "APNX",
  "menu" : {
    "docs" : {
      "parent" : "ebook"
}
},
  "lastmod" : "2021-05-28"
}

## 什么是一 .apx 文件？ ##

使用 .apnx 扩展名的亚马逊页码索引文件是一种电子书文件类型；亚马逊 Kindle 使用。这些文件实际上被称为 Kindle 设备使用的分页文件。因此，通常会创建 APNX 文件来标记 Kindle 电子书的页面。自 3.1 固件以来，亚马逊 Kindle 设备上已启动分页功能。它在 APNX 文件中查找页面索引，然后将其与原始印刷书中的页码进行映射。这些文件与 Amazon 电子书文件一起保存到 Kindle 设备中。您无法打开或编辑 APNX 文件。

## APNX 文件格式规范 ##

＃＃＃ 布局

|字节|内容|评论|
---|---|---|
|4 |00010001 |格式标识符。小端序的值为 65537。|
|4 |下一个开始 |第一个标头的结束位置后的偏移量。开始一个新的标题信息序列|
|4 |长度|第一个标题的长度|
|N |第一个标题 |包含内容标头的字符串。它开始下一个序列|
|2 |未知 |总是 1|
|2 |长度 |第二个标头的长度|
|2 |页数 |表示页面的第二个标头之后的总字节数。此总数包括被 pageMap 忽略的字节。|
|2 |未知 |总是 32|
|N |第二个标题 |包含页面映射头的字符串|
|4*N |填充 |页映射头中给出的第一个数字表示0字节的数量。
|4*N |页面列表 ||

### 内容标题

内容标头由包含在 {} 中的字符串组成，其中包含键、值对：

|内容|评论|
---|---|
|内容指南|指导。|
|阿辛|这本书的 Kindle 版本的亚马逊标识符。|
|cdeType | MOBI cdeType。电子书应始终为 EBOK。|
|fileRevisionId |此文件的修订版。|

＃＃＃＃ 例子
```
{"contentGuid":"d8c14b0","asin":"B000JML5VM","cdeType":"EBOK","fileRevisionId":"1296874359405"}
```
### 页面映射标题
页面映射标头由包含在 {} 中的字符串组成，其中包含键、值对。

|内容 |评论|
---|---|
|阿辛|页面对应的纸质书的 ISBN 10|
|页面地图|三值元组。看起来像：“（N，N，N）\
1) 开始页编号序列的标头之后的字节数\
2) 未知\
3) 未知\|
＃＃＃＃ 例子
```
{"asin":"1906694184","pageMap":"(4,a,1)"}
```

### 页面列表

页面列表是原始 HTML 中的一系列偏移量。每个
value 是新页面的开始。每个条目都是一个 4 字节的大端
诠释。



## 参考

* [亚马逊 APNX 文件格式](https://nachtimwald.com/2011/02/09/amazon-apnx-file-format/)
* [APNX - MobileRead Wiki](https://wiki.mobileread.com/wiki/APNX)

