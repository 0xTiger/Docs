{
  "date" : "2021-06-24",
  "keywords" :["bat 文件","什么是 bat 文件","文件","bat 文件示例","扩展名","格式"],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description":"了解 BAT 文件格式和可以创建和打开 BAT 文件的 API。",
  "title" :"BAT - 批处理文件格式",
  "linktitle" : "BAT",
  "menu" : {
    "docs" : {
      "parent" : "executable"
}
},
  "lastmod" : "2021-06-24"
}

## 什么是一 .bat 文件？
BAT 文件称为批处理文件，可在 DOS 和所有版本的 Windows 下运行，位于 cmd.exe 下。它由一系列纯文本行命令组成，由命令行解释器执行以执行不同的任务，例如在 Windows 中运行维护实用程序或启动典型程序。批处理文件可以包括解释器可以交互接受的任何命令，并使用批处理文件中编写的启用条件分支和循环的代码结构。
## BAT文件格式
BAT 文件格式只是一个脚本，用于自动执行本质上重复的命令序列。术语“批处理"用于批处理，可以认为是“非交互式执行"。因此，批处理文件可能无法处理一批多个数据。在旧的磁盘操作系统 (DOS) 中，批处理文件是在命令行界面下通过键入文件名和扩展名 .bat 来运行的。早期的基于 Microsoft 图形界面的操作系统（例如 Microsoft Windows）依赖于 DOS。用户必须使用 DOS 来执行典型的操作，如修复、优化或重新安装 Windows。后来微软推出了不依赖于DOS操作系统的Windows NT。因此，可以在现代 Microsoft 操作系统中使用命令提示符或 **cmd.exe** 运行批处理文件。
### 批处理文件参数
命令提示符支持许多特殊变量，例如 **%0、%1 到 %9**，以便引用批处理作业的名称和路径以及批处理作业中的九个调用参数。不存在的参数被长度为零的字符串替换。虽然，它们可以像环境变量一样使用，但不会保存在环境中。 Microsoft 和 IBM 将这些变量称为替换参数，而 Novell、Digital Research 和 Caldera 为它们引入了术语替换变量。

以下是一些有用的批处理文件命令：
|命令 |说明 |
------|------------|
|版本 |此批处理命令显示您正在使用的 MS-DOS 版本。 |
|协会|这是将扩展名与文件类型 (FTYPE) 关联、显示现有关联或删除关联的批处理命令。 |
|光盘|此批处理命令有助于更改不同的目录，或显示当前目录。 |
|CLS|此批处理命令清除屏幕。 |
|复制|此批处理命令用于将文件从一个位置复制到另一个位置。 |
|删除|此批处理命令删除文件而不是目录。 |
|目录|此批处理命令列出目录的内容。 |
|日期|此批处理命令有助于查找系统日期。 |
|回声|此批处理命令显示消息，或打开或关闭命令回显。 |
|退出|此批处理命令退出 DOS 控制台。 |
|医学博士|此批处理命令在当前位置创建一个新目录。 |
|移动|此批处理命令在目录之间移动文件或目录。 |
|路径|此批处理命令显示或设置路径变量。 |
|暂停|此批处理命令提示用户并等待输入一行输入。 |
|提示|此批处理命令可用于更改或重置 cmd.exe 提示符。 |
|研发|此批处理命令删除目录，但目录需要为空才能删除。 |
|任|重命名文件和目录 |
|REM|该批处理命令用于批处理文件中的备注，防止执行备注的内容。 |
|开始|此批处理命令在新窗口中启动程序，或打开文档。 |
|时间|此批处理命令设置或显示时间。 |
|类型|此批处理命令将一个或多个文件的内容打印到输出。 |
|音量|此批处理命令显示卷标。 |
|属性|显示或设置当前目录下文件的属性 |
|CHKDSK|此批处理命令检查磁盘是否存在任何问题。 |
|选择|此批处理命令向用户提供选项列表。 |
|命令|此批处理命令调用命令提示符的另一个实例。 |
|比较|此批处理命令根据文件大小比较 2 个文件。 |
|转换|此批处理命令将卷从 FAT16 或 FAT32 文件系统转换为 NTFS 文件系统。 |
|司机查询|此批处理命令显示所有已安装的设备驱动程序及其属性。 |
|展开|此批处理命令从压缩的 .cab 文件中提取文件。 |
|查找|此批处理命令在文件或输入中搜索字符串，输出匹配的行。 |
|格式|此批处理命令格式化磁盘以使用 Windows 支持的文件系统，例如 FAT、FAT32 或 NTFS，从而覆盖磁盘的先前内容。 |
|帮助|此批处理命令显示 Windows 提供的命令列表。 |
|IPCONFIG|此批处理命令显示 Windows IP 配置。按连接显示配置和该连接的名称。 |
|标签|此批处理命令添加、设置或删除磁盘标签。 |
|更多|此批处理命令一次显示一个或多个文件的内容。 |
|网络|根据使用的命令提供各种网络服务。 |
|平|此批处理命令通过网络将 ICMP/IP“回显"数据包发送到指定地址。 |
|关机|此批处理命令关闭计算机，或注销当前用户。 |
|排序|此批处理命令从源文件中获取输入并按字母顺序对其内容进行排序，从 A 到 Z 或 Z 到 A。它在控制台上打印输出。 |
|替代|此批处理命令将驱动器号分配给本地文件夹、显示当前分配或删除分配。 |
|系统信息|此批处理命令显示计算机及其操作系统的配置。 |
|任务杀手|此批处理命令结束一个或多个任务。 |
|任务清单|此批处理命令列出任务，包括任务名称和进程 ID (PID)。 |
|X复制|此批处理命令以更高级的方式复制文件和目录。 |
|树|此批处理命令将当前目录的所有子目录树显示到任何级别的递归或深度。 |
|FC |此批处理命令列出两个文件之间的实际差异。 |
|DISKPART |此批处理命令显示和配置磁盘分区的属性。 |
|TITLE |这个批处理命令设置控制台窗口中显示的标题。 |
|设置 |显示当前系统上的环境变量列表。 |

## BAT 文件示例
批处理脚本通常保存为简单的文本文件；包含按顺序执行的命令。这些文件以 .bat 扩展名保存；使用**Command Interpreter**软件识别和执行。该软件在 Microsoft Windows 中以 **cmd.exe** 的名称提供。

这是一个示例批处理脚本，它删除当前目录中的所有文件：
```
:: Deletes All files in the Current Directory With Prompts and Warnings
::(Hidden, System, and Read-Only Files are Not Affected)
:: @ECHO OFF
DEL . DR
```


## 参考

* [批处理脚本-快速指南](https://www.tutorialspoint.com/batch_script/batch_script_quick_guide.htm)
* [批处理文件 - 维基百科](https://en.wikipedia.org/wiki/Batch_file)

