{
  "date" : "2021-04-20",
  "keywords": [ "JSPF file", "jspf", "JSPF example", "extension", "format", "jspf tutorial", "jsp fragment", "JSPF file format" ],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "title" :"JSPF - รูปแบบไฟล์ส่วนย่อย JSP",
  "description":"เรียนรู้เกี่ยวกับรูปแบบไฟล์ JSPF และ API ที่สามารถสร้างและเปิดไฟล์ JSPF",
  "linktitle" : "JSPF",
  "menu" : {
    "docs" : {
      "parent" : "programming"
}
},
  "lastmod" : "2021-04-21"
}

## ไฟล์ JSPF คืออะไร??
ไฟล์ที่มีนามสกุล .jspf เรียกว่า JSP แฟรกเมนต์; ไฟล์สแตติกรวมอยู่ในไฟล์ JSP อื่น ไฟล์ JSPF ไม่ได้ถูกคอมไพล์ด้วยตัวมันเอง แต่จะคอมไพล์ตามหน้าเพจที่รวมไฟล์ไว้ ไวยากรณ์คล้ายกับโค้ด Java Server Pages (JSP) มันมีเพียงส่วนของ JSP; ไม่รวมเอกสาร JSP ทั้งหมด

## รูปแบบไฟล์ JSPF
คำว่า "เซ็กเมนต์ JSP" ถูกใช้แทนเนื่องจากคำว่า "แฟรกเมนต์ JSP" โอเวอร์โหลดในข้อมูลจำเพาะ JSP 2.0 แฟรกเมนต์ JSP สามารถใช้นามสกุล .jsp หรือ .jspf และควรอยู่ใน **/WEB-INF/jspf** หรือกับไฟล์สแตติกที่เหลือ แฟรกเมนต์ JSP ที่ไม่ใช่เพจที่สมบูรณ์ต้องใช้นามสกุล .jspf และต้องอยู่ใน **/WEB-INF/jspf**

### การจัดระเบียบไฟล์ JSP หรือ JSP Fragment
ไฟล์ JSP ประกอบด้วยส่วนต่อไปนี้ตามลำดับที่แสดง:

1. เปิดความคิดเห็น
2. คำสั่งหน้า JSP
3. คำสั่งไลบรารีแท็กเพิ่มเติม
4. การประกาศ JSP ที่เป็นทางเลือก
5. รหัส HTML และ JSP

ไฟล์ JSP หรือ JSPF ทั้งคู่เริ่มต้นด้วยความคิดเห็นสไตล์ฝั่งเซิร์ฟเวอร์ซึ่งเรียกว่า **การเปิดความคิดเห็น**:

```
<%-- 
  - Author(s):
  - Date:
  - Copyright Notice:
  - @(#)
  - Description: 
  --%>
```
ความคิดเห็นนี้สามารถมองเห็นได้ทางฝั่งเซิร์ฟเวอร์เท่านั้น เนื่องจากถูกลบออกระหว่างการแสดงผลเพจ JSP

## เมื่อใดควรใช้ไฟล์ JSP Fragment
เมื่อเพจ JSP ต้องการโครงสร้างบางอย่างแต่ซับซ้อนซึ่งอาจใช้ซ้ำในเพจ JSP อื่น วิธีหนึ่งในการจัดการสิ่งนี้คือการแบ่งมันออกเป็นส่วนๆ โดยใช้รูปแบบมุมมองคอมโพสิต (ส่วนรูปแบบของ Java Blueprints) ตัวอย่างเช่น บางครั้งเพจ JSP มีเค้าโครงตรรกะต่อไปนี้ในโครงสร้างการนำเสนอ:

{{< figure src="../jspf.png" alt="รูปแบบไฟล์ JSPF" >}}

ในสถานการณ์นี้ หน้า JSP แบบผสมนี้สามารถแปลงเป็นโมดูลต่างๆ ได้ แต่ละโมดูลจะเรียกว่าส่วนย่อย JSP แยกต่างหาก จากนั้นสามารถวางแฟรกเมนต์ JSP ในตำแหน่งที่เหมาะสมในหน้าคอมโพสิต JSP ดังนั้น ไฟล์ JSPF จะถูกใช้เมื่อคำสั่ง include แบบสแตติกถูกใช้เพื่อรวมเพจที่จะไม่เรียกด้วยตัวเอง ไฟล์ที่มีนามสกุล .jspf ควรอยู่ในไดเร็กทอรี /WEB-INF/jspf/ ของไฟล์เก็บถาวรเว็บแอ็พพลิเคชัน ( สงคราม).

## ตัวอย่าง JSPF
```
<%@ include file="/WEB-INF/jspf/header.jspf" %>
...
<%@ include file="/WEB-INF/jspf/menuBar.jspf" %>
...
<jsp:include page="<%= currentBody %>" />
...
<%@ include file="/WEB-INF/jspf/footnote.jspf" %>
...
<%@ include file="/WEB-INF/jspf/footer.jspf" %>
...
```

## อ้างอิง

* [ข้อตกลงรหัสสำหรับหน้า JavaServer](https://www.oracle.com/technical-resources/articles/javase/code-convention.html)

