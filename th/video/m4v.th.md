{
  "date" : "2019-10-11",
  "keywords" :[ "M4V", "file", "extension", "format", "MPEG-4", "Digital Rights Management", "DRM", "Apple", "วิดีโอ"],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"เอ็ม4วี",
  "description":"เรียนรู้เกี่ยวกับรูปแบบไฟล์ M4V และ API ที่สามารถสร้างและเปิดไฟล์ M4V",
  "linktitle" : "M4V",
  "menu" : {
    "docs" : {
      "parent" : "video"
}
},
  "lastmod" : "2019-09-14"
}

## ไฟล์ M4V คืออะไร??

รูปแบบไฟล์ **M4V** ที่พัฒนาโดย Apple เป็นคอนเทนเนอร์วิดีโอที่ได้รับการป้องกันด้วยการป้องกันการคัดลอก Digital Rights Management (DRM) เพื่อปกป้องความเป็นส่วนตัวหรือการคัดลอก วิดีโอและแทร็กเสียงถูกล้อมรอบด้วยไฟล์คอนเทนเนอร์เพื่อสร้างดัชนีและจัดการสตรีมการเล่น นอกจากนี้ คอนเทนเนอร์ยังมีคุณลักษณะของบทต่างๆ ที่คล้ายกับในดีวีดีอีกด้วย Apple ใช้ M4V เพื่อเข้ารหัสวิดีโอใน iTunes Store ปกป้องการผลิตซ้ำโดยไม่ได้รับอนุญาตผ่านการป้องกันการคัดลอกแบบ FairPlay ของ Apple โดยอนุญาตให้เล่นไฟล์ M4V บนคอมพิวเตอร์ที่ได้รับอนุญาตเท่านั้นที่มีบัญชีที่ใช้ในการซื้อวิดีโอ อย่างไรก็ตาม หากเอาการป้องกัน DRM ออกจากไฟล์ M4V ไฟล์เหล่านี้สามารถเล่นในเครื่องเล่นวิดีโออื่นได้โดยเปลี่ยนนามสกุลจาก .m4v เป็น .mp4 ซึ่งเป็นสาเหตุที่ไฟล์ M4V เชื่อมโยงกับ MPEG-4 M4V ใช้ H.264 สำหรับวิดีโอและ **[AAC](/th/audio/aac/)** และ Dolby Digital สำหรับการเข้ารหัสและถอดรหัสเสียง

## โครงสร้างไฟล์ M4V ##

ไฟล์ M4V มีกลุ่มต่อเนื่องที่มีส่วนหัว 8 ไบต์, ขนาดก้อน 4 ไบต์ และชนิดก้อน 4 ไบต์ในแต่ละก้อน กลุ่มแรกคือ “ftype” และมีประเภทย่อยที่ออฟเซ็ต 8 M4V กำหนดโดยประเภทย่อยซึ่งต้องเป็น "M4V_" ประเภทชิ้นเพิ่มเติมคือลายเซ็นที่กำหนดไว้ล่วงหน้า: "ftyp", "mdat", "moov", "pnot", "udta", "uuid", "moof", "free", "skip", "jP2", "wide" , "load", "ctab", "imap", "matt", "kmat", "clip", "crgn", "sync", "chap", "tmcd", "scpt", "ssrc", " ภาพ". วนซ้ำจนกว่าจะตรวจพบประเภทที่ไม่รู้จัก เราสร้างไฟล์ M4V

นี่คือการตรวจสอบตัวอย่าง: ข้อมูลไบนารีของไฟล์ m4v ตัวอย่างได้รับการตรวจสอบผ่าน Hex Viewer และสังเกตได้ว่าข้อมูลเริ่มต้นด้วยลายเซ็น **ftyp** (ฐานสิบหก: 66 74 79 70) ที่ออฟเซ็ต 4 ซึ่งกำหนด QuickTime ประเภทไฟล์คอนเทนเนอร์ ประเภทย่อยของไฟล์คือ **M4V_** (ฐานสิบหก: 4D 34 56 20) ซึ่งชี้ไปที่ประเภทไฟล์ M4V (MPEG-4) ขนาดบล็อกแรกคือ 32 (hex: 00 00 00 20, big-endian, high byte ก่อน) ขนาดอยู่ที่ offset 0 ที่ offset 32 (hex: 20) จะอยู่ที่ chunk ที่สอง ซึ่งมีขนาด 30,322 (hex : 00 00 76 72, big-endian, ไบต์ล่างก่อน) และพิมพ์ **moov** (ฐานสิบหก: 6D 6F 6F 76) ชิ้นถัดไปอยู่ที่ออฟเซ็ต 32+30,322#30,354 (ฐานสิบหก: 00 00 76 92) และมีขนาด 8 (ฐานสิบหก: 00 00 00 08) และพิมพ์ **free** (ฐานสิบหก: 66 72 65 65)
### ตัวแปลงสัญญาณที่ใช้ใน M4V ###

#### ตัวแปลงสัญญาณวิดีโอ H.264 ####

H.264 เป็นมาตรฐานการบีบอัดวิดีโอที่แปลงวิดีโอดิจิทัลเป็นรูปแบบที่ต้องใช้พื้นที่น้อยลงเมื่อต้องการส่งหรือจัดเก็บ M4V ใช้ H.264 สำหรับการบีบอัดวิดีโอ แอปพลิเคชันมีตั้งแต่ดีวีดี ทีวี การประชุมทางวิดีโอ และการสตรีมวิดีโอผ่านอินเทอร์เน็ต H.264 ประกอบด้วยสองส่วนหลัก: ตัวเข้ารหัส – ซึ่งบีบอัดวิดีโอ, ตัวถอดรหัส – ซึ่งคลายการบีบอัดวิดีโอที่บีบอัดกลับ ในรูปด้านล่าง มีการเน้นกระบวนการเข้ารหัสและถอดรหัส และกระบวนการอื่นๆ ครอบคลุมอยู่ในมาตรฐาน H.264

##### ขั้นตอนการเข้ารหัสและถอดรหัสวิดีโอใน H.264 #####

สำหรับบิตสตรีม H.264 ที่ถูกบีบอัด ตัวเข้ารหัสวิดีโอจะดำเนินการทำนาย การแปลง และกระบวนการเข้ารหัส ในเวลาเดียวกัน ตัวถอดรหัสดำเนินกระบวนการผกผันของการถอดรหัส การแปลงผกผัน และการสร้างใหม่เพื่อสร้างไฟล์วิดีโอกลับคืน H.264 ใช้ขนาดครึ่งหนึ่งของ MPEG

#### ตัวแปลงสัญญาณเสียง ####

การเข้ารหัสเสียงขั้นสูง (AAC) เป็นตัวแปลงสัญญาณเสียงสำหรับการบีบอัดเสียงดิจิทัลแบบสูญเสีย และใช้ในคอนเทนเนอร์ M4V AAC เป็นตัวสืบทอดของรูปแบบ [MP3](/th/audio/mp3/) และให้คุณภาพที่ดีกว่า MP3 ที่บิตเรตเท่ากัน รูปแบบ AAC จะโยนข้อมูลบางอย่างออกไปในระหว่างขั้นตอนการบีบอัด ซึ่งมีความสำคัญน้อยกว่า AAC เป็นตัวแปลงสัญญาณแบบบล็อกตามอัตราบิตแปรผัน (VBR) ซึ่งแต่ละบล็อกจะถอดรหัสตัวอย่างโดเมนเวลา 1024 ตัวอย่าง

### อ้างอิง ###

* [วิกิพีเดีย - M4V](https://en.wikipedia.org/wiki/M4V)
* [วิกิพีเดีย - MPEG-4_AVC](https://en.wikipedia.org/wiki/H.264/MPEG-4_AVC)

