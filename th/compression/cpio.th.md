{
  "date" : "2023-05-10",
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"ไฟล์ CPIO - รูปแบบไฟล์เก็บถาวร Unix CPIO",
  "description":"เรียนรู้ที่จะรู้ว่าไฟล์ CPIO และ API คืออะไรที่สามารถสร้างและเปิดไฟล์ CPIO",
  "linktitle" : "CPIO",
  "menu" : {
    "docs" : {
      "identifier" : "compression-cpio",
      "parent" : "compression"
}
},
  "lastmod" : "2023-05-10"
}

## ไฟล์ CPIO คืออะไร??

ไฟล์ CPIO เป็นไฟล์เก็บถาวรที่สร้างในรูปแบบ Copy In Copy Out (CPIO) ของ Unix คล้ายกับรูปแบบไฟล์ TAR นอกเหนือจากที่ไม่มีการบีบอัด ไฟล์ CPIO สามารถจัดเก็บไฟล์อุปกรณ์ ลิงก์สัญลักษณ์ และแอตทริบิวต์ของไฟล์เพิ่มเติม

## รูปแบบไฟล์ CPIO

ไฟล์เก็บถาวร CPIO ถูกสร้างขึ้นเป็นไฟล์ไบนารีที่มนุษย์ไม่สามารถอ่านได้ มันเก็บคอลเลกชันของไฟล์และไดเร็กทอรี เนื้อหาของไฟล์เก็บถาวร CPIO จะถูกระบุด้วยข้อมูลเมตาดาต้า เช่น ชื่อไฟล์ สิทธิ์ การเป็นเจ้าของ และการประทับเวลา ข้อมูลเมตาดาต้านี้ยังถูกจัดเก็บไว้ในไฟล์เก็บถาวรเพื่อให้ระบบเข้าถึงจากด้านข้างได้

## รูปแบบของเอกสาร CPIO

ไฟล์ CPIO ประกอบด้วยไฟล์สมาชิกที่ต่อกันตั้งแต่หนึ่งไฟล์ขึ้นไป แต่ละไฟล์ในไฟล์เก็บถาวรประกอบด้วยส่วนหัวหรือตามด้วยเนื้อหาไฟล์ดังที่กล่าวไว้ในส่วนหัว ไฟล์เก็บถาวรมีส่วนหัวอื่นที่ส่วนท้ายซึ่งอธิบายโดยไฟล์ว่างชื่อ TRAILER!!

### ประเภทของคลังข้อมูล CPIO

ไฟล์เก็บถาวร CPIO มีสองประเภท สิ่งเหล่านี้แตกต่างเฉพาะในรูปแบบของส่วนหัวเท่านั้น

* คลังข้อมูล ASCII - คลังเก็บ CPIO เหล่านี้มีส่วนหัวที่สามารถพิมพ์ได้ซึ่งจะกลายเป็นส่วนหนึ่งของไฟล์เก็บถาวร CPIO หากไฟล์เก็บถาวรนั้นประกอบด้วยไฟล์ ASCII
* ไฟล์เก็บถาวรไบนารี - ไฟล์เก็บถาวร CPIO เหล่านี้มีส่วนหัวแบบไบนารี

## การทำงานกับเอกสารเก่า CPIO

### จะสร้างคลังเก็บ CPIO ได้อย่างไร

คุณสามารถสร้าง CPIO บนระบบที่คล้าย Unix ได้โดยใช้คำสั่ง **cpio** คำสั่งต่อไปนี้จะค้นหาไฟล์และไดเร็กทอรีทั้งหมดในไดเร็กทอรีปัจจุบันและไดเร็กทอรีย่อย จากนั้นเอาต์พุตนี้จะถูกส่งไปยังคำสั่ง cpio ซึ่งจะสร้างไฟล์เก็บถาวร CPIO ใหม่ชื่อ archive.cpio

```
find . -depth -print | cpio -ov > archive_cpio.cpio
```
### จะแยกไฟล์จากคลังเก็บ CPIO ได้อย่างไร

คำสั่งต่อไปนี้จะแยกไฟล์ออกจากไฟล์เก็บถาวรที่มีอยู่

```
cpio -id < archive_cpio.cpio
```
มันจะอ่านไฟล์ archive.cpio จากอินพุตมาตรฐาน และแตกไฟล์ไปยังไดเร็กทอรีปัจจุบัน


## อ้างอิง

* [CPIO - โดย Wikipedia](https://en.wikipedia.org/wiki/Cpio)
* [รูปแบบไฟล์ CPIO](https://www.ibm.com/docs/en/zos/2.2.0?topic=formats-cpio-format-cpio-archives)

