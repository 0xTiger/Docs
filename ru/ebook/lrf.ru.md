{
  "date" : "2019-12-12",
  "keywords" :[ "LRF", "файл", "расширение", "формат", "электронная книга", "цифровая книга" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description":"Узнайте о формате файла LRF и API, которые могут создавать и открывать файлы LRF.",
  "title" :"Формат файла LRF - файл Sony Portable Reader",
  "linktitle" : "LRF",
  "menu" : {
    "docs" : {
      "parent" : "ebook"
}
},
  "lastmod" : "2019-12-12"
}

## .LRF вариант №

Файл с расширением .lrf представляет собой файл широкополосной электронной книги (BBeB), который содержит данные для Sony BBeB, включая текст, изображения и данные разбиения на страницы. Файл сохраняется в сжатом двоичном формате, который содержит заголовок, указанное количество объектов и индекс объекта. Файлы LRF и LRX содержат два доступных формата книг BBeB. Файлы LRF не зашифрованы и могут быть скомпилированы из файлов [LRX](/ru/ebook/lrf/). Файлы LRF могут быть преобразованы из нескольких других типов файлов, включая PDF и HTML. Если ваш компьютер не может открыть файл LRF, у вас, вероятно, не установлено программное обеспечение для открытия или редактирования файлов LRF. Программы, которые могут открывать файлы LRF, — это Caliber, BookDesigner, Makelrf и Canon Book Creator для Windows, Caliber для Linux, Caliber и Sony Reader для Macintosh.

## Краткая история

Тип файла LRF в первую очередь связан с Line Rider [inXile Entertainment] (https://en.wikipedia.org/wiki/InXile_Entertainment). Line Rider — это интернет-физическая игрушка, изобретенная в сентябре 2006 года студентом словенского университета Боштьяном Чадежем. Электронные книги Sony (например, Sony PRS-500 и Sony Librie) используют расширение файла LRF для своих документов и текстов. Этот проприетарный тип файлов теперь устарел, как и связанные с ним файлы LRS и LRX. Эти три типа файлов составляют электронную книгу BroadBand (BBeB), выпуск которой был прекращен в 2010 году, когда Sony начала продавать свои электронные книги в формате EPUB.

## Формат файла LRF

Подробные спецификации формата файлов LRF доступны в [веб-архиве](https://web.archive.org/web/20110809071744/http://www.sven.de/librie/Librie/LrfFormat). Файл LRF состоит из:
* заголовок
* количество объектов
* индекс объекта.

Все эти значения находятся в порядке Intel (сначала младший значащий бит).

### LRF-заголовок

|Смещение (шестнадцатеричное) |Размер(байты) |Имя/значение| Пример значения|
---|---|---|---|
|0 |8| Подпись ФПС| 4C 00 52 00 46 00 00 00 = «LRF» в Юникоде |
|8 |2| версия?| 999 в большинстве файлов|
|А |2| "Псевдошифрование" |ключевой байт 48|
|0С |4| ID корневого объекта| 0x0044|
|10 |8| КоличествоОбъектов |342|
|18 |8| Смещение индекса объекта| 0x00093440|
|20 |4| неизвестно| 0|
|24 |1| Флаги| (16 - задом наперед, 1 = спереди назад) 16|
|25 |1| неизвестно |(заполнение?) 0|
|26 |2| неизвестно| 1600|
|28 |2| неизвестно| (дополнение?) 0|
|2А |2| Высота?| 600|
|2С |2| Ширина?| 800|
|2Е |1| неизвестно| 24|
|2F |1| неизвестно |(заполнение?) 0|
|30 |0x14| неизвестно| нули|
|44 |4| Идентификатор объекта только для объекта PlaneStream (0x1E) | 0x0042|
|48 |4| неизвестно |0x1536|
|4С |2| XMLCompSize| 0x035C|


## использованная литература

* [Формат файла LRF] (https://web.archive.org/web/20110809071744/http://www.sven.de/librie/Librie/LrfFormat)
* [BBeB — Википедия] (https://en.wikipedia.org/wiki/BBeB)

