{
  "date" : "2021-04-08",
  "keywords" :[ "файл lz4", "формат файла lz4", "что такое файл lz4", "файл", "пример lz4", "расширение файла lz4", "расширение", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"LZ4 - формат сжатого файла LZ4",
  "description":"Узнайте о формате файла LBR и API-интерфейсах, которые могут создавать и открывать файлы LZ4.",
  "linktitle" : "LZ4",
  "menu" : {
    "docs" : {
      "parent" : "compression"
}
},
  "lastmod" : "2021-04-19"
}

## .LZ4 вариант №

Файл с расширением .lz4 представляет собой сжатый архивный файл, созданный с помощью приложений/утилит, поддерживающих сжатие [LZ4](https://en.wikipedia.org/wiki/LZ4_(compression_algorithm)). Алгоритм LZ4 фокусируется на компромиссе между скоростью и степенью сжатия. Сжатые архивы LZ4 можно создавать с помощью утилиты командной строки LZ4 и распаковывать с ее помощью.

## Формат файла LZ4

Формат файла LZ4, основанный на алгоритме сжатия LZ4, не зависит от типа процессора, операционной системы, файловой системы и набора символов. Он подходит для сжатия файлов и потокового сжатия с использованием алгоритма LZ4. Первоначальная реализация формата LZ4 была выполнена на языке [C](/ru/programming/c/) Яном Колле в 2011 году и доступна для справки разработчика на [Github] (https://github.com/lz4/lz4). .

### Формат кадра LZ4

Общая структура формата файла LZ4 показана ниже.

|МагияNb|Ф. Дескриптор| Блок|(...)|Конечная метка |C. Контрольная сумма|
---|---|---|---|---|---|
|4 байта| 3-15 байт||| 4 байта| 0-4 байта|

#### Магическое число

4 байта, формат с прямым порядком байтов. Значение: 0x184D2204

#### Дескриптор кадра

Дескриптор кадра состоит из 3–15 байтов и является наиболее важной частью спецификации. Вместе поля Magic_Number и Frame_Descriptor называются заголовком кадра LZ4, и его размер варьируется от 7 до 19 байтов. Как показано ниже.

|ФЛГ| БД| (Размер содержимого)| (ID словаря)| ХК|
---|---|---|---|---|
|1 байт| 1 байт| 0 - 8 байт| 0 - 4 байта| 1 байт|

#### Блоки данных

Каждый блок данных следует следующему порядку.

|Размер блока| данные| (контрольная сумма блока)|
---|---|---|
|4 байта| |0 - 4 байта|

#### EndMark

Поток блоков заканчивается, когда за последним блоком данных следует 32-битное значение 0x00000000.

#### Контрольная сумма содержимого

Content_Checksum проверяет правильность декодируемого контента и выполняется с использованием результата алгоритма xxHash-32. Он проверяет результаты успешной передачи всех блоков в правильном порядке и без ошибок.

## использованная литература

* [Формат кадра LZ4] (https://github.com/lz4/lz4/blob/dev/doc/lz4_Frame_format.md)
* [Алгоритм сжатия LZ4 - Википедия](https://en.wikipedia.org/wiki/LZ4_(compression_algorithm))

