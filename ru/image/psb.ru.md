{
  "date" : "2019-10-11",
  "keywords" :[ "файл psb", "формат файла psb", "что такое файл psb", "файл", "пример psb", "расширение файла psb", "расширение", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"PSB — формат большого изображения Photoshop",
  "description":"Узнайте о формате файла PSB и API-интерфейсах, которые могут создавать и открывать файлы PSB.",
  "linktitle" : "PSB",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## .PSB вариант №
Adobe Photoshop сохраняет файлы в двух форматах. Файлы размером 30 000 на 30 000 пикселей сохраняются с расширением PSD, а файлы размером больше PSD до 300 000 на 300 000 пикселей сохраняются с расширением PSB, известным как «Photoshop Big». В частности, файлы PSB могут иметь размер до 4 ЭБ (более 4,2 миллиарда ГБ) с изображениями высотой и шириной до 300 000 пикселей. С другой стороны, PSD-файлы могут иметь максимальный размер до 2 ГБ и размеры изображения 30 000 пикселей.

PSB также известен как большой формат для фотошопа и поддерживает все функции фотошопа, такие как слои, эффекты и фильтры. Photoshop может конвертировать файл PSB в [PSD] (/ru/image/psd/), [JPG] (/ru/image/jpeg/) , [PNG](/ru/image/png/), [EPS](/ru/page-description-language/eps/), [GIF](/ru/image/gif/) и другие форматы. Большой формат документа Photoshop доступен после включения функции обработки файлов в диалоговом окне настроек Photoshop.

## Информация о формате файла ##

Формат файла Photoshop разделен на пять основных частей с множеством маркеров длины для перемещения между разделами.

|Формат файла
---|
|Заголовок файла
|Данные цветового режима
| Ресурсы изображений
|Информация о слоях и масках
|(((
Данные изображения
)))

### Заголовок файла ###

Заголовок файла имеет фиксированную длину 26 байт и содержит основные свойства изображения.

BYTE Signature [4] — равно «8BPS».

WORD Версия [2] – Номер версии, PSD #1, PSB #2.

BYTE Reserved [6] — зарезервировано и всегда равно нулю.

WORD Channels [2] — количество цветовых каналов в изображении, включая альфа-каналы. Его значение находится в диапазоне от 1 до 56.

LONG Rows [4] — высота изображения в пикселях, PSD 1-30 000, PSB 1-300 000.

LONG Columns [4] — ширина изображения в пикселях, PSD 1-30 000, PSB 1-300 000.

WORD Depth [2] – количество бит на канал. Поддерживаемые значения: 1,8,16 и 32.

WORD Mode [2] – Цветовой режим файла.

#### Описание режима ####


|Режим|Описание
---|---|
|0|Растровое изображение (монохромное)
|1|Оттенки серого
|2|Индексировано
|3|RGB
|4|ЦМИК
|7|Многоканальный
|8|Дуотон (полутона)
|9|Лаборатория

### Данные цветового режима ###

После раздела заголовка файла следует раздел данных цветового режима. Блок начинается с ДЛИННОГО числа, которое указывает длину блока в байтах. Структура данных цветового режима следующая:

4 байта — длина следующих цветовых данных.

Переменная — данные о цвете

Если значение поля режима в разделе заголовка не индексированный цвет или дуотон, длина блока будет равна 0, и после поля длины данных не будет.

Для индексированных цветных изображений длина будет составлять 768 байт, что будет содержать палитру из 256 цветов. Для дуплекса данные будут содержать параметры экрана и другую связанную информацию.

### Ресурсы изображений ###

Третий блок, следующий за разделом данных цветового режима, — это раздел ресурсов изображения. Первые четыре байта представляют собой ДЛИННОЕ число, указывающее длину блока, за которым следует серия блоков ресурсов. Структура блока ресурсов изображения следующая:

Тип BYTE [4] — Подпись «8BIM»

WORD ID [2] – идентификатор ресурса изображения. Существует список идентификаторов ресурсов, которые можно увидеть по справочной ссылке.

BYTE Имя [переменная] — Имя: Паскаль Строка четной длины. ** **

LONG Size [4] — фактический размер следующих данных ресурса.

BYTE Data [переменная} — данные ресурса. Он дополнен, чтобы сделать ровный размер.

Некоторые из форматов ресурсов кратко описаны ниже:

**Формат ресурсов сетки и направляющих:** информация о сетке и направляющих хранится в блоке ресурсов. Эти блоки ресурсов содержат 16-байтовую сетку и заголовок направляющей, за которыми следуют 5-байтовые блоки направляющей информации.

** Формат ресурса эскиза: ** Информация об эскизе хранится в блоке ресурсов изображения для предварительного просмотра, который состоит из 28-байтового заголовка и эскиза JFIF в формате RGB.

** Формат ресурса образцов цветов. ** Информация о образцах цветов хранится в блоке ресурсов изображения с 8-байтовым заголовком, за которым следует блок информации о образцах цветов переменной длины.

### Информация о слое и маске ###

Четвертый блок представляет собой блок информации о слоях и масках и содержит информацию о слоях и масках. Сначала сохраняется информация о слое, а затем информация о маске.

**Информация о слое:** Информация о слое начинается со значения LONG, которое показывает длину информации о слое. После этого идет подсчет значений WORD, который показывает количество последующих записей слоя.

[8] – длина слоев

[2] – Количество слоев

[Переменная] — информация о каждом слое.

[Переменная] — данные изображения канала.** **

**Информация о маске:** Структура маски имеет следующий формат:


|Структура данных|Имя поля| Описание
---|---|---|
|СЛОВО| Наложение цветового пространства| (не задокументировано)
|БАЙТ[8]| Компоненты цвета| Компоненты цвета 4x2 байта
|СЛОВО| Непрозрачность| 0#прозрачный, 1#непрозрачный
|БАЙТ| Вид| 0#инвертировано, 1#защищено, 128#использовать сохраненное значение
|БАЙТ| обивка| установить на ноль

### Данные изображения ###

Последний раздел содержит данные о пикселях изображения. Данные изображения хранятся в виде серии последовательностей в плоскостях, т. е. сначала все красные данные, затем все зеленые данные и т. д. СЛОВО в начале каждой строки показывает размер в байтах, относящийся к каждой строке сканирования.

[2] – Метод сжатия:

[Переменная] — данные изображения в плоскостном порядке, т. е. RRRR, GGGG, BBBB и т. д.

Методы сжатия:

0 – Raw Данные изображения

1 – РЛЭ сжато

2 — Zip без предсказания

3 — Почтовый индекс с предсказанием

## Ссылка ##

* [Формат файла PSB — Adobe] (https://www.adobe.com/devnet-apps/photoshop/fileformatashtml/)
* [PSB - Википедия](https://en.wikipedia.org/wiki/Adobe_Photoshop#File_format)

