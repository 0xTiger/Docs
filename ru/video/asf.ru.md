{
  "date" : "2021-02-15",
  "keywords" :[ "файл asf", "формат файла asf", "что такое файл asf", "файл", "пример asf", "расширение файла asf", "расширение", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"ASF — расширенный системный формат файлов",
  "description":"Узнайте о формате файлов ASF и API, которые могут создавать и открывать файлы ASF.",
  "linktitle" : "ASF",
  "menu" : {
    "docs" : {
      "parent" : "video"
}
},
  "lastmod" : "2021-02-16"
}

## .ASF вариант №

Файл с расширением .asf представляет собой формат мультимедийного файла для хранения и воспроизведения цифровых мультимедийных потоков по сети. Это формат файла-контейнера, который может содержать как видео-, так и аудиоконтент для потоковой передачи в Интернете. Вы редко найдете файлы ASF и, скорее всего, столкнетесь с файлами Windows Media Audio ([WMA](/ru/audio/wma/)) и Windows Media Video ([WMV](/ru/video/wmv/)) с указанием файлов ASF. с контентом, закодированным соответствующими кодеками. Файлы Windows Media можно создавать и читать с помощью Windows Media Format SDK.

## Формат файла ASF

Файл ASF может содержать несколько независимых или зависимых потоков. Это может включать в себя несколько аудиопотоков для многоканального аудио или видеопотоков с несколькими битрейтами. Множественные битрейты делают потоки пригодными для передачи по разным полосам пропускания. Более того, потоки в файле ASF могут быть в сжатом или несжатом формате. Наилучшее сжатие достигается с помощью кодеков Microsoft Windows Media Audio и Video 9 Series. Полные спецификации формата файлов ASF доступны на [веб-сайте Microsoft](https://download.microsoft.com/download/7/9/0/790fecaa-f64a-4a5e-a430-0bccdab3f1b4/ASF_Specification.doc).

### Файловая структура верхнего уровня ASF

Файлы ASF логически содержат три типа объектов верхнего уровня:

* `Header Object` - обязателен и должен быть размещен в начале каждого файла ASF.
* `Объект данных` - обязательный и должен следовать за объектом заголовка
* `Index Object(s)` — необязательный, но полезный для предоставления произвольного доступа к файлам ASF на основе времени.

На следующем изображении показана файловая структура верхнего уровня файлов ASF.

![ASF File Structure](../asf.png "ASF File Structure")

#### Объект заголовка верхнего уровня ASF

Объект Header предоставляет известную последовательность байтов в начале файлов ASF и может дополнительно содержать метаданные, такие как библиографическая информация. Он содержит всю информацию, которая требуется для правильной интерпретации информации в объекте данных. Объект заголовка может включать в себя несколько стандартных объектов, включая, помимо прочего:

* Объект свойств файла — содержит глобальные атрибуты файла.
* Объект свойств потока — определяет цифровой медиапоток и его характеристики.
* Объект расширения заголовка — позволяет добавлять дополнительные функции в файл ASF, сохраняя при этом обратную совместимость.
* Объект описания содержимого — содержит библиографическую информацию.
* Script Command Object — содержит команды, которые могут быть выполнены на временной шкале воспроизведения.
* Marker Object - Предоставляет именованные точки перехода в файле.

Объект заголовка представлен с использованием следующей структуры:

|Имя поля |Тип поля |Размер (биты)|
---|---|---|
|Идентификатор объекта| GUID| 128|
|Размер объекта| QWORD| 64|
|Количество объектов заголовка| Двойное слово| 32|
|Зарезервировано1| БАЙТ | 8|
|Зарезервировано2| БАЙТ | 8|

#### Объект данных верхнего уровня ASF

Все цифровые мультимедийные данные для файла ASF содержатся в объекте данных и хранятся в форме пакетов данных ASF. Каждый пакет данных имеет фиксированную длину и содержит данные для одного или нескольких цифровых медиапотоков.

#### Объекты индекса верхнего уровня ASF

Объекты индекса верхнего уровня ASF имеют следующие два типа:

* `Simple Index Object` – содержит основанный на времени индекс видеоданных в файле ASF. Интервал времени между записями индекса является постоянным и сохраняется в объекте простого индекса.
* «Индексный объект» — относится к индексному объекту, индексному объекту мультимедийного объекта и индексному объекту временного кода, форматы которых схожи. Как и простой индексный объект, индексный объект индексирует по времени с фиксированным интервалом времени, но не ограничивается видеопотоками.

## использованная литература

* [Формат файла ASF — Microsoft](https://download.microsoft.com/download/7/9/0/790fecaa-f64a-4a5e-a430-0bccdab3f1b4/ASF_Specification.doc)
* [Формат файла QuickTime — Википедия](https://en.wikipedia.org/wiki/QuickTime_File_Format)

