{
  "date" : "2021-06-09",
  "keywords" :[ "m4p", "mp3", "файл", "расширение", "формат", "что такое формат файла m4p", "музыка", "формат файла m4p", "M4b против MP3", "спецификация формата файла m4p "],
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Узнайте о формате файлов M4P и API-интерфейсах, которые могут создавать, конвертировать и открывать файлы M4P.",
  "title" :"M4P — формат файла аудиокниги MPEG-4",
  "linktitle" : "M4P",
  "menu" : {
    "docs" : {
      "parent" : "audio"
}
},
  "lastmod" : "2021-06-09"
}

## Что такое файл M4P?
Файл с расширением .m4p представляет собой аудиофайл, который обычно доступен для скачивания в магазине Apple iTunes. Другими словами, мы можем сказать, что M4P — это файл AAC, но защищенный от копирования с помощью управления цифровыми правами (DRM). Это означает, что файлы M4P можно воспроизводить только на авторизованных системах или устройствах. Обычно файлы M4P относятся к мультимедийным устройствам Apple. Таким образом, эти файлы можно воспроизводить только на макбуках Apple, подкастах, смартфонах, таких как iPhone 6 или iPhone 7.

## Формат файла M4P
M4P означает MPEG 4 Protected (аудио), и он кодирует звук с помощью расширенного аудиокодека (AAC) и защищает файл от несанкционированного использования файла. Этот формат файла обычно считается форматом аудиофайла iTunes Music Store. Apple использует свою систему управления цифровыми правами (DRM) FairPlay для защиты файлов M4P. FairPlay DRM основан на технологии, разработанной Veridisc. Его механизм защиты работает путем шифрования аудиопотока AAC с использованием шифрования AES. Пользователь получает мастер-ключ, который присваивается его учетной записи для расшифровки. Этот формат файла был введен в качестве замены формата файла MP3, потому что MP3 изначально предназначался не как аудиофайл, а как уровень III в видеофайле MPEG 1 или 2.


## Спецификации формата файла M4P

Подобно [M4A](/ru/audio/m4a/), файлы M4P также состоят из последовательных фрагментов. Каждый фрагмент имеет 8-байтовый заголовок и подразделяется следующим образом:
- Размер блока 4 байта (с обратным порядком байтов, старший байт вперед)
- 4-байтный тип чанка - одна из предустановленных сигнатур: "mdat", "moov", "pnot", "moof", "udta", "uuid", "free", "skip", "ftyp", "jP2", "широкий", "загрузить", "imap", "матовый", "глава", "кмат", "клип", "crgn", "синхронизация", "tmcd", "PICT", "scpt ", "ctab", "ssrc".

Подобно M4A, первый фрагмент в M4P будет иметь тип «ftype» и иметь подтип по смещению 8. M4P определяется подтипом, который должен быть «M4P_».

Повторяя фрагменты, пока не будет обнаружен фрагмент неизвестного типа, он будет составлять файл M4P (MPEG-4 Audio).

## Использованная литература ##

* [MPEG-4, часть 14 — Википедия](https://en.wikipedia.org/wiki/MPEG-4_Part_14)
* [Формат MPEG-4 Part 14 Audio (M4A,M4B,M4P) и пример восстановления](https://www.file-recovery.com/m4a-signature-format.htm)

